/*

 Lo-Dash 1.0.1 (Custom Build) <http://lodash.com/>
 Build: `lodash modern -o ./dist/lodash.js`
 Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 Based on Underscore.js 1.4.4 <http://underscorejs.org/>
 Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
 Available under MIT license <http://lodash.com/license>
*/
(function(c,o){function a(e){if(e&&typeof e=="object"&&e.__wrapped__)return e;if(!(this instanceof a))return new a(e);this.__wrapped__=e}function f(e,l,p){l||(l=0);var t=e.length,y=t-l>=(p||db);if(y){var z={};for(p=l-1;++p<t;){var B=e[p]+"";(ca.call(z,B)?z[B]:z[B]=[]).push(e[p])}}return function(F){if(y){var H=F+"";return ca.call(z,H)&&V(z[H],F)>-1}return V(e,F,l)>-1}}function k(e){return e.charCodeAt(0)}function h(e,l){var p=e.index,t=l.index;e=e.criteria;l=l.criteria;if(e!==l){if(e>l||typeof e==
"undefined")return 1;if(e<l||typeof l=="undefined")return-1}return p<t?-1:1}function m(e,l,p,t){function y(){var H=arguments,M=B?this:l;z||(e=l[F]);if(p.length)H=H.length?(H=w(H),t?H.concat(p):p.concat(H)):p;if(this instanceof y){u.prototype=e.prototype;M=new u;u.prototype=null;H=e.apply(M,H);return aa(H)?H:M}return e.apply(M,H)}var z=O(e),B=!p,F=l;if(B)p=l;z||(l=e);return y}function b(e,l,p){if(e==null)return Ka;var t=typeof e;if(t!="function"){if(t!="object")return function(z){return z[e]};var y=
oa(e);return function(z){for(var B=y.length,F=false;B--;)if(!(F=Q(z[y[B]],e[y[B]],za)))break;return F}}if(typeof l!="undefined"){if(p===1)return function(z){return e.call(l,z)};if(p===2)return function(z,B){return e.call(l,z,B)};if(p===4)return function(z,B,F,H){return e.call(l,z,B,F,H)};return function(z,B,F){return e.call(l,z,B,F)}}return e}function d(){for(var e={isKeysFast:eb,arrays:"isArray(iterable)",bottom:"",loop:"",top:"",useHas:true},l,p=0;l=arguments[p];p++)for(var t in l)e[t]=l[t];l=e.args;
e.firstArg=/^[^,]+/.exec(l)[0];p="var index, iterable = "+e.firstArg+", result = iterable;\nif (!iterable) return result;\n"+e.top+";\n";if(e.arrays)p+="var length = iterable.length; index = -1;\nif ("+e.arrays+") {\n  while (++index < length) {\n    "+e.loop+"\n  }\n}\nelse {  ";if(e.isKeysFast&&e.useHas)p+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] ? nativeKeys(iterable) : [],\n      length = ownProps.length;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    "+
e.loop+"\n  }  ";else{p+="\n  for (index in iterable) {";if(e.useHas){p+="\n    if (";if(e.useHas)p+="hasOwnProperty.call(iterable, index)";p+=") {    "}p+=e.loop+";    ";if(e.useHas)p+="\n    }";p+="\n  }  "}if(e.arrays)p+="\n}";p+=e.bottom+";\nreturn result";return Function("createCallback, hasOwnProperty, isArguments, isArray, isString, objectTypes, nativeKeys","return function("+l+") {\n"+p+"\n}")(b,ca,G,da,ba,Ta,va)}function j(e){return"\\"+fb[e]}function q(e){return Ua[e]}function u(){}function w(e,
l,p){l||(l=0);if(typeof p=="undefined")p=e?e.length:0;var t=-1;p=p-l||0;for(var y=Array(p<0?0:p);++t<p;)y[t]=e[l+t];return y}function A(e){return gb[e]}function G(e){return fa.call(e)==Aa}function N(e){var l=false;if(!(e&&typeof e=="object")||G(e))return l;var p=e.constructor;if(!O(p)||p instanceof p){ta(e,function(t,y){l=y});return l===false||ca.call(e,l)}return l}function I(e){var l=[];ua(e,function(p,t){l.push(t)});return l}function R(e,l,p,t,y,z){var B=e;if(typeof l=="function"){t=p;p=l;l=false}if(typeof p==
"function"){p=typeof t=="undefined"?p:b(p,t,1);B=p(B);var F=typeof B!="undefined";F||(B=e)}if(t=aa(B)){var H=fa.call(B);if(!la[H])return B;var M=da(B)}if(!t||!l)return t&&!F?M?w(B):La({},B):B;t=pa[H];switch(H){case Ba:case Ca:return F?B:new t(+B);case Da:case wa:return F?B:new t(B);case Ea:return F?B:t(B.source,hb.exec(B))}y||(y=[]);z||(z=[]);for(H=y.length;H--;)if(y[H]==e)return z[H];if(!F){B=M?t(B.length):{};if(M){if(ca.call(e,"index"))B.index=e.index;if(ca.call(e,"input"))B.input=e.input}}y.push(e);
z.push(B);(M?K:ua)(F?B:e,function(T,W){B[W]=R(T,l,p,o,y,z)});return B}function S(e){var l=[];ta(e,function(p,t){O(p)&&l.push(t)});return l.sort()}function X(e){for(var l=-1,p=oa(e),t=p.length,y={};++l<t;){var z=p[l];y[e[z]]=z}return y}function Q(e,l,p,t,y,z){var B=p===za;if(p&&!B){p=typeof t=="undefined"?p:b(p,t,2);var F=p(e,l);if(typeof F!="undefined")return!!F}if(e===l)return e!==0||1/e==1/l;var H=typeof e,M=typeof l;if(e===e&&(!e||H!="function"&&H!="object")&&(!l||M!="function"&&M!="object"))return false;
if(e==null||l==null)return e===l;M=fa.call(e);H=fa.call(l);if(M==Aa)M=xa;if(H==Aa)H=xa;if(M!=H)return false;switch(M){case Ba:case Ca:return+e==+l;case Da:return e!=+e?l!=+l:e==0?1/e==1/l:e==+l;case Ea:case wa:return e==l+""}H=M==Fa;if(!H){if(e.__wrapped__||l.__wrapped__)return Q(e.__wrapped__||e,l.__wrapped__||l,p,t,y,z);if(M!=xa)return false;M=e.constructor;var T=l.constructor;if(M!=T&&!(O(M)&&M instanceof M&&O(T)&&T instanceof T))return false}y||(y=[]);z||(z=[]);for(M=y.length;M--;)if(y[M]==e)return z[M]==
l;var W=0;F=true;y.push(e);z.push(l);if(H){M=e.length;W=l.length;F=W==e.length;if(!F&&!B)return F;for(;W--;){H=M;T=l[W];if(B)for(;H--;){if(F=Q(e[H],T,p,t,y,z))break}else if(!(F=Q(e[W],T,p,t,y,z)))break}return F}ta(l,function(qa,Z,Y){if(ca.call(Y,Z)){W++;return F=ca.call(e,Z)&&Q(e[Z],qa,p,t,y,z)}});F&&!B&&ta(e,function(qa,Z,Y){if(ca.call(Y,Z))return F=--W>-1});return F}function O(e){return typeof e=="function"}function aa(e){return e?Ta[typeof e]:false}function na(e){return typeof e=="number"||fa.call(e)==
Da}function ba(e){return typeof e=="string"||fa.call(e)==wa}function ea(e,l,p){var t=arguments,y=0,z=2;if(!aa(e))return e;if(p===za)var B=t[3],F=t[4],H=t[5];else{F=[];H=[];if(typeof p!="number")z=t.length;if(z>3&&typeof t[z-2]=="function")B=b(t[--z-1],t[z--],2);else if(z>2&&typeof t[z-1]=="function")B=t[--z]}for(;++y<z;)(da(t[y])?K:ua)(t[y],function(M,T){var W,qa,Z=M,Y=e[T];if(M&&((qa=da(M))||Ma(M))){for(Z=F.length;Z--;)if(W=F[Z]==M){Y=H[Z];break}if(!W){Y=qa?da(Y)?Y:[]:Ma(Y)?Y:{};if(B){Z=B(Y,M);if(typeof Z!=
"undefined")Y=Z}F.push(M);H.push(Y);B||(Y=ea(Y,M,za,B,F,H))}}else{if(B){Z=B(Y,M);if(typeof Z=="undefined")Z=M}if(typeof Z!="undefined")Y=Z}e[T]=Y});return e}function g(e){for(var l=-1,p=oa(e),t=p.length,y=Array(t);++l<t;)y[l]=e[p[l]];return y}function s(e,l,p){var t=-1,y=e?e.length:0,z=false;p=(p<0?ra(0,y+p):p)||0;if(typeof y=="number")z=(ba(e)?e.indexOf(l,p):V(e,l,p))>-1;else ga(e,function(B){if(++t>=p)return!(z=B===l)});return z}function r(e,l,p){var t=true;l=b(l,p);if(da(e)){p=-1;for(var y=e.length;++p<
y;)if(!(t=!!l(e[p],p,e)))break}else ga(e,function(z,B,F){return t=!!l(z,B,F)});return t}function C(e,l,p){var t=[];l=b(l,p);if(da(e)){p=-1;for(var y=e.length;++p<y;){var z=e[p];l(z,p,e)&&t.push(z)}}else ga(e,function(B,F,H){l(B,F,H)&&t.push(B)});return t}function E(e,l,p){var t;l=b(l,p);K(e,function(y,z,B){if(l(y,z,B)){t=y;return false}});return t}function K(e,l,p){if(l&&typeof p=="undefined"&&da(e)){p=-1;for(var t=e.length;++p<t;)if(l(e[p],p,e)===false)break}else ga(e,l,p);return e}function n(e,
l,p){var t=-1,y=e?e.length:0,z=Array(typeof y=="number"?y:0);l=b(l,p);if(da(e))for(;++t<y;)z[t]=l(e[t],t,e);else ga(e,function(B,F,H){z[++t]=l(B,F,H)});return z}function x(e,l,p){var t=-Infinity,y=t;if(!l&&da(e)){p=-1;for(var z=e.length;++p<z;){var B=e[p];if(B>y)y=B}}else{l=!l&&ba(e)?k:b(l,p);ga(e,function(F,H,M){H=l(F,H,M);if(H>t){t=H;y=F}})}return y}function v(e,l,p,t){var y=arguments.length<3;l=b(l,t,4);if(da(e)){var z=-1,B=e.length;if(y)p=e[++z];for(;++z<B;)p=l(p,e[z],z,e)}else ga(e,function(F,
H,M){p=y?(y=false,F):l(p,F,H,M)});return p}function D(e,l,p,t){var y=e?e.length:0,z=arguments.length<3;if(typeof y!="number"){var B=oa(e);y=B.length}l=b(l,t,4);K(e,function(F,H,M){H=B?B[--y]:--y;p=z?(z=false,e[H]):l(p,e[H],H,M)});return p}function J(e,l,p){var t;l=b(l,p);if(da(e)){p=-1;for(var y=e.length;++p<y;)if(t=l(e[p],p,e))break}else ga(e,function(z,B,F){return!(t=l(z,B,F))});return!!t}function L(e,l,p){if(e){var t=0,y=e.length;if(typeof l!="number"&&l!=null){var z=-1;for(l=b(l,p);++z<y&&l(e[z],
z,e);)t++}else{t=l;if(t==null||p)return e[0]}return w(e,0,Na(ra(0,t),y))}}function P(e,l){for(var p=-1,t=e?e.length:0,y=[];++p<t;){var z=e[p];da(z)?Ha.apply(y,l?z:P(z)):y.push(z)}return y}function V(e,l,p){var t=-1,y=e?e.length:0;if(typeof p=="number")t=(p<0?ra(0,y+p):p||0)-1;else if(p){t=U(e,l);return e[t]===l?t:-1}for(;++t<y;)if(e[t]===l)return t;return-1}function ma(e,l,p){if(typeof l!="number"&&l!=null){var t=0,y=-1,z=e?e.length:0;for(l=b(l,p);++y<z&&l(e[y],y,e);)t++}else t=l==null||p?1:ra(0,
l);return w(e,t)}function U(e,l,p,t){var y=0,z=e?e.length:y;p=p?b(p,t,1):Ka;for(l=p(l);y<z;){t=y+z>>>1;p(e[t])<l?y=t+1:z=t}return y}function ia(e,l,p,t){var y=-1,z=e?e.length:0,B=[],F=B;if(typeof l=="function"){t=p;p=l;l=false}var H=!l&&z>=75;if(H)var M={};if(p){F=[];p=b(p,t)}for(;++y<z;){t=e[y];var T=p?p(t,y,e):t;if(H){var W=T+"";W=ca.call(M,W)?!(F=M[W]):F=M[W]=[]}if(l?!y||F[F.length-1]!==T:W||V(F,T)<0){if(p||H)F.push(T);B.push(t)}}return B}function Oa(e,l){return ib||sa&&arguments.length>2?sa.call.apply(sa,
arguments):m(e,l,w(arguments,2))}function Va(e){var l=w(arguments,1);return setTimeout(function(){e.apply(o,l)},1)}function Ka(e){return e}function Wa(e){K(S(e),function(l){var p=a[l]=e[l];a.prototype[l]=function(){var t=[this.__wrapped__];Ha.apply(t,arguments);return new a(p.apply(a,t))}})}function Xa(){return this.__wrapped__}var Pa=typeof exports=="object"&&exports,Qa=typeof module=="object"&&module&&module.exports==Pa&&module,ha=typeof global=="object"&&global;if(ha.global===ha)c=ha;var ja=[];
ha={};var jb=0,za=ha,db=30,kb=c._,lb=/&(?:amp|lt|gt|quot|#39);/g,mb=/\b__p \+= '';/g,nb=/\b(__p \+=) '' \+/g,ob=/(__e\(.*?\)|\b__t\)) \+\n'';/g,hb=/\w*$/,ka=RegExp("^"+(ha.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),pb=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ya=/<%=([\s\S]+?)%>/g,Ia=/($^)/,qb=/[&<>"']/g,rb=/['\n\r\t\u2028\u2029\\]/g,sb=0,tb=Math.ceil,ya=ja.concat,Za=Math.floor,Ga=ka.test(Ga=Object.getPrototypeOf)&&Ga,ca=ha.hasOwnProperty,Ha=ja.push,fa=ha.toString,
sa=ka.test(sa=w.bind)&&sa,Ra=ka.test(Ra=Array.isArray)&&Ra,ub=c.isFinite,vb=c.isNaN,va=ka.test(va=Object.keys)&&va,ra=Math.max,Na=Math.min,$a=Math.random,Aa="[object Arguments]",Fa="[object Array]",Ba="[object Boolean]",Ca="[object Date]",Da="[object Number]",xa="[object Object]",Ea="[object RegExp]",wa="[object String]";ka=!!c.attachEvent;ha=sa&&!/\n|true/.test(sa+ka);var ib=sa&&!ha,eb=va&&(ka||ha),la={};la["[object Function]"]=false;la[Aa]=la[Fa]=la[Ba]=la[Ca]=la[Da]=la[xa]=la[Ea]=la[wa]=true;var pa=
{};pa[Fa]=Array;pa[Ba]=Boolean;pa[Ca]=Date;pa[xa]=Object;pa[Da]=Number;pa[Ea]=RegExp;pa[wa]=String;var Ta={"boolean":false,"function":true,object:true,number:false,string:false,undefined:false},fb={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"};a.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Ya,variable:"",imports:{_:a}};ka={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",
loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"};var Ja={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : createCallback(callback, thisArg)",arrays:"typeof length == 'number'",loop:"if (callback(iterable[index], index, collection) === false) return result"},ab={top:"if (!objectTypes[typeof iterable]) return result;\n"+Ja.top,arrays:false},ga=d(Ja),ta=d(Ja,ab,{useHas:false}),ua=d(Ja,ab),da=Ra||
function(e){return e instanceof Array||fa.call(e)==Fa},oa=!va?I:function(e){if(!aa(e))return[];return va(e)},Ua={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},gb=X(Ua),La=d(ka,{top:ka.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = createCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),
Sa=d(ka);if(O(/x/))O=function(e){return e instanceof Function||fa.call(e)=="[object Function]"};var Ma=function(e){if(!(e&&typeof e=="object"))return false;var l=e.valueOf,p=typeof l=="function"&&(p=Ga(l))&&Ga(p);return p?e==p||Ga(e)==p&&!G(e):N(e)};if(ha&&Qa&&typeof setImmediate=="function")Va=Oa(setImmediate,c);a.after=function(e,l){if(e<1)return l();return function(){if(--e<1)return l.apply(this,arguments)}};a.assign=La;a.at=function(e){for(var l=-1,p=ya.apply(ja,w(arguments,1)),t=p.length,y=Array(t);++l<
t;)y[l]=e[p[l]];return y};a.bind=Oa;a.bindAll=function(e){for(var l=ya.apply(ja,arguments),p=l.length>1?0:(l=S(e),-1),t=l.length;++p<t;){var y=l[p];e[y]=Oa(e[y],e)}return e};a.bindKey=function(e,l){return m(e,l,w(arguments,2))};a.compact=function(e){for(var l=-1,p=e?e.length:0,t=[];++l<p;){var y=e[l];y&&t.push(y)}return t};a.compose=function(){var e=arguments;return function(){for(var l=arguments,p=e.length;p--;)l=[e[p].apply(this,l)];return l[0]}};a.countBy=function(e,l,p){var t={};l=b(l,p);K(e,
function(y,z,B){z=l(y,z,B)+"";ca.call(t,z)?t[z]++:t[z]=1});return t};a.debounce=function(e,l,p){function t(){F=null;p||(z=e.apply(B,y))}var y,z,B,F;return function(){var H=p&&!F;y=arguments;B=this;clearTimeout(F);F=setTimeout(t,l);if(H)z=e.apply(B,y);return z}};a.defaults=Sa;a.defer=Va;a.delay=function(e,l){var p=w(arguments,2);return setTimeout(function(){e.apply(o,p)},l)};a.difference=function(e){var l=-1,p=e?e.length:0,t=ya.apply(ja,arguments);t=f(t,p);for(var y=[];++l<p;){var z=e[l];t(z)||y.push(z)}return y};
a.filter=C;a.flatten=P;a.forEach=K;a.forIn=ta;a.forOwn=ua;a.functions=S;a.groupBy=function(e,l,p){var t={};l=b(l,p);K(e,function(y,z,B){z=l(y,z,B)+"";(ca.call(t,z)?t[z]:t[z]=[]).push(y)});return t};a.initial=function(e,l,p){if(!e)return[];var t=0,y=e.length;if(typeof l!="number"&&l!=null){var z=y;for(l=b(l,p);z--&&l(e[z],z,e);)t++}else t=l==null||p?1:l||t;return w(e,0,Na(ra(0,y-t),y))};a.intersection=function(e){var l=arguments,p=l.length,t={"0":{}},y=-1,z=e?e.length:0,B=z>=100,F=[],H=F;a:for(;++y<
z;){var M=e[y];if(B){var T=M+"";T=ca.call(t[0],T)?!(H=t[0][T]):H=t[0][T]=[]}if(T||V(H,M)<0){B&&H.push(M);for(var W=p;--W;)if(!(t[W]||(t[W]=f(l[W],0,100)))(M))continue a;F.push(M)}}return F};a.invert=X;a.invoke=function(e,l){var p=w(arguments,2),t=-1,y=typeof l=="function",z=e?e.length:0,B=Array(typeof z=="number"?z:0);K(e,function(F){B[++t]=(y?l:F[l]).apply(F,p)});return B};a.keys=oa;a.map=n;a.max=x;a.memoize=function(e,l){var p={};return function(){var t=(l?l.apply(this,arguments):arguments[0])+
"";return ca.call(p,t)?p[t]:p[t]=e.apply(this,arguments)}};a.merge=ea;a.min=function(e,l,p){var t=Infinity,y=t;if(!l&&da(e)){p=-1;for(var z=e.length;++p<z;){var B=e[p];if(B<y)y=B}}else{l=!l&&ba(e)?k:b(l,p);ga(e,function(F,H,M){H=l(F,H,M);if(H<t){t=H;y=F}})}return y};a.object=function(e,l){for(var p=-1,t=e?e.length:0,y={};++p<t;){var z=e[p];if(l)y[z]=l[p];else y[z[0]]=z[1]}return y};a.omit=function(e,l,p){var t=typeof l=="function",y={};if(t)l=b(l,p);else var z=ya.apply(ja,arguments);ta(e,function(B,
F,H){if(t?!l(B,F,H):V(z,F,1)<0)y[F]=B});return y};a.once=function(e){var l,p;return function(){if(l)return p;l=true;p=e.apply(this,arguments);e=null;return p}};a.pairs=function(e){for(var l=-1,p=oa(e),t=p.length,y=Array(t);++l<t;){var z=p[l];y[l]=[z,e[z]]}return y};a.partial=function(e){return m(e,w(arguments,1))};a.partialRight=function(e){return m(e,w(arguments,1),null,za)};a.pick=function(e,l,p){var t={};if(typeof l!="function")for(var y=0,z=ya.apply(ja,arguments),B=aa(e)?z.length:0;++y<B;){var F=
z[y];if(F in e)t[F]=e[F]}else{l=b(l,p);ta(e,function(H,M,T){if(l(H,M,T))t[M]=H})}return t};a.pluck=n;a.range=function(e,l,p){e=+e||0;p=+p||1;if(l==null){l=e;e=0}var t=-1;l=ra(0,tb((l-e)/p));for(var y=Array(l);++t<l;){y[t]=e;e+=p}return y};a.reject=function(e,l,p){l=b(l,p);return C(e,function(t,y,z){return!l(t,y,z)})};a.rest=ma;a.shuffle=function(e){var l=-1,p=e?e.length:0,t=Array(typeof p=="number"?p:0);K(e,function(y){var z=Za($a()*(++l+1));t[l]=t[z];t[z]=y});return t};a.sortBy=function(e,l,p){var t=
-1,y=e?e.length:0,z=Array(typeof y=="number"?y:0);l=b(l,p);K(e,function(B,F,H){z[++t]={criteria:l(B,F,H),index:t,value:B}});y=z.length;for(z.sort(h);y--;)z[y]=z[y].value;return z};a.tap=function(e,l){l(e);return e};a.throttle=function(e,l){function p(){F=new Date;B=null;y=e.apply(z,t)}var t,y,z,B,F=0;return function(){var H=new Date,M=l-(H-F);t=arguments;z=this;if(M<=0){clearTimeout(B);B=null;F=H;y=e.apply(z,t)}else B||(B=setTimeout(p,M));return y}};a.times=function(e,l,p){e=+e||0;for(var t=-1,y=
Array(e);++t<e;)y[t]=l.call(p,t);return y};a.toArray=function(e){if(e&&typeof e.length=="number")return w(e);return g(e)};a.union=function(){return ia(ya.apply(ja,arguments))};a.uniq=ia;a.values=g;a.where=C;a.without=function(e){for(var l=-1,p=e?e.length:0,t=f(arguments,1),y=[];++l<p;){var z=e[l];t(z)||y.push(z)}return y};a.wrap=function(e,l){return function(){var p=[e];Ha.apply(p,arguments);return l.apply(this,p)}};a.zip=function(e){for(var l=-1,p=e?x(n(arguments,"length")):0,t=Array(p);++l<p;)t[l]=
n(arguments,l);return t};a.collect=n;a.drop=ma;a.each=K;a.extend=La;a.methods=S;a.select=C;a.tail=ma;a.unique=ia;Wa(a);a.clone=R;a.cloneDeep=function(e,l,p){return R(e,true,l,p)};a.contains=s;a.escape=function(e){return e==null?"":(e+"").replace(qb,q)};a.every=r;a.find=E;a.has=function(e,l){return e?ca.call(e,l):false};a.identity=Ka;a.indexOf=V;a.isArguments=G;a.isArray=da;a.isBoolean=function(e){return e===true||e===false||fa.call(e)==Ba};a.isDate=function(e){return e instanceof Date||fa.call(e)==
Ca};a.isElement=function(e){return e?e.nodeType===1:false};a.isEmpty=function(e){var l=true;if(!e)return l;var p=fa.call(e),t=e.length;if(p==Fa||p==wa||p==Aa||p==xa&&typeof t=="number"&&O(e.splice))return!t;ua(e,function(){return l=false});return l};a.isEqual=Q;a.isFinite=function(e){return ub(e)&&!vb(parseFloat(e))};a.isFunction=O;a.isNaN=function(e){return na(e)&&e!=+e};a.isNull=function(e){return e===null};a.isNumber=na;a.isObject=aa;a.isPlainObject=Ma;a.isRegExp=function(e){return e instanceof
RegExp||fa.call(e)==Ea};a.isString=ba;a.isUndefined=function(e){return typeof e=="undefined"};a.lastIndexOf=function(e,l,p){var t=e?e.length:0;if(typeof p=="number")t=(p<0?ra(0,t+p):Na(p,t-1))+1;for(;t--;)if(e[t]===l)return t;return-1};a.mixin=Wa;a.noConflict=function(){c._=kb;return this};a.random=function(e,l){if(e==null&&l==null)l=1;e=+e||0;if(l==null){l=e;e=0}return e+Za($a()*((+l||0)-e+1))};a.reduce=v;a.reduceRight=D;a.result=function(e,l){var p=e?e[l]:o;return O(p)?e[l]():p};a.size=function(e){var l=
e?e.length:0;return typeof l=="number"?l:oa(e).length};a.some=J;a.sortedIndex=U;a.template=function(e,l,p){var t=a.templateSettings;e||(e="");p=Sa({},p,t);var y=Sa({},p.imports,t.imports);t=oa(y);y=g(y);var z,B=0,F=p.interpolate||Ia,H="__p += '";e.replace(RegExp((p.escape||Ia).source+"|"+F.source+"|"+(F===Ya?pb:Ia).source+"|"+(p.evaluate||Ia).source+"|$","g"),function(qa,Z,Y,wb,bb,cb){Y||(Y=wb);H+=e.slice(B,cb).replace(rb,j);if(Z)H+="' +\n__e("+Z+") +\n'";if(bb){z=true;H+="';\n"+bb+";\n__p += '"}if(Y)H+=
"' +\n((__t = ("+Y+")) == null ? '' : __t) +\n'";B=cb+qa.length;return qa});H+="';\n";var M=F=p.variable;if(!M){F="obj";H="with ("+F+") {\n"+H+"\n}\n"}H=(z?H.replace(mb,""):H).replace(nb,"$1").replace(ob,"$1;");H="function("+F+") {\n"+(M?"":F+" || ("+F+" = {});\n")+"var __t, __p = '', __e = _.escape"+(z?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+H+"return __p\n}";p="\n/*\n//@ sourceURL="+(p.sourceURL||"/lodash/template/source["+sb++ +"]")+"\n*/";
try{var T=Function(t,"return "+H+p).apply(o,y)}catch(W){W.source=H;throw W;}if(l)return T(l);T.source=H;return T};a.unescape=function(e){return e==null?"":(e+"").replace(lb,A)};a.uniqueId=function(e){var l=++jb;return(e==null?"":e+"")+l};a.all=r;a.any=J;a.detect=E;a.foldl=v;a.foldr=D;a.include=s;a.inject=v;ua(a,function(e,l){a.prototype[l]||(a.prototype[l]=function(){var p=[this.__wrapped__];Ha.apply(p,arguments);return e.apply(a,p)})});a.first=L;a.last=function(e,l,p){if(e){var t=0,y=e.length;if(typeof l!=
"number"&&l!=null){var z=y;for(l=b(l,p);z--&&l(e[z],z,e);)t++}else{t=l;if(t==null||p)return e[y-1]}return w(e,ra(0,y-t))}};a.take=L;a.head=L;ua(a,function(e,l){a.prototype[l]||(a.prototype[l]=function(p,t){var y=e(this.__wrapped__,p,t);return p==null||t&&typeof p!="function"?y:new a(y)})});a.VERSION="1.0.1";a.prototype.toString=function(){return this.__wrapped__+""};a.prototype.value=Xa;a.prototype.valueOf=Xa;ga(["join","pop","shift"],function(e){var l=ja[e];a.prototype[e]=function(){return l.apply(this.__wrapped__,
arguments)}});ga(["push","reverse","sort","unshift"],function(e){var l=ja[e];a.prototype[e]=function(){l.apply(this.__wrapped__,arguments);return this}});ga(["concat","slice","splice"],function(e){var l=ja[e];a.prototype[e]=function(){return new a(l.apply(this.__wrapped__,arguments))}});if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){c._=a;define(function(){return a})}else if(Pa)if(Qa)(Qa.exports=a)._=a;else Pa._=a;else c._=a})(this);(function(){var c=this,o=c.Backbone,a=Array.prototype.slice,f=Array.prototype.splice,k;k="undefined"!==typeof exports?exports:c.Backbone={};k.VERSION="0.9.2";var h=c._;!h&&"undefined"!==typeof require&&(h=require("underscore"));var m=c.jQuery||c.Zepto||c.ender;k.setDomLibrary=function(g){m=g};k.noConflict=function(){c.Backbone=o;return this};k.emulateHTTP=false;k.emulateJSON=false;var b=/\s+/,d=k.Events={on:function(g,s,r){var C,E,K,n,x;if(!s)return this;g=g.split(b);for(C=this._callbacks||(this._callbacks=
{});E=g.shift();){K=(x=C[E])?x.tail:{};K.next=n={};K.context=r;K.callback=s;C[E]={tail:n,next:x?x.next:K}}return this},off:function(g,s,r){var C,E,K,n,x,v;if(E=this._callbacks){if(!g&&!s&&!r)return delete this._callbacks,this;for(g=g?g.split(b):h.keys(E);C=g.shift();)if(K=E[C],delete E[C],K&&(s||r))for(n=K.tail;(K=K.next)!==n;)if(x=K.callback,v=K.context,s&&x!==s||r&&v!==r)this.on(C,x,v);return this}},trigger:function(g){var s,r,C,E,K,n;if(!(C=this._callbacks))return this;K=C.all;g=g.split(b);for(n=
a.call(arguments,1);s=g.shift();){if(r=C[s])for(E=r.tail;(r=r.next)!==E;)r.callback.apply(r.context||this,n);if(r=K){E=r.tail;for(s=[s].concat(n);(r=r.next)!==E;)r.callback.apply(r.context||this,s)}}return this}};d.bind=d.on;d.unbind=d.off;var j=k.Model=function(g,s){var r;g||(g={});s&&s.parse&&(g=this.parse(g));if(r=ba(this,"defaults"))g=h.extend({},r,g);s&&s.collection&&(this.collection=s.collection);this.attributes={};this._escapedAttributes={};this.cid=h.uniqueId("c");this.changed={};this._silent=
{};this._pending={};this.set(g,{silent:true});this.changed={};this._silent={};this._pending={};this._previousAttributes=h.clone(this.attributes);this.initialize.apply(this,arguments)};h.extend(j.prototype,d,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return h.clone(this.attributes)},get:function(g){return this.attributes[g]},escape:function(g){var s;if(s=this._escapedAttributes[g])return s;s=this.get(g);return this._escapedAttributes[g]=h.escape(null==
s?"":""+s)},has:function(g){return null!=this.get(g)},set:function(g,s,r){var C,E;h.isObject(g)||null==g?(C=g,r=s):(C={},C[g]=s);r||(r={});if(!C)return this;C instanceof j&&(C=C.attributes);if(r.unset)for(E in C)C[E]=void 0;if(!this._validate(C,r))return false;this.idAttribute in C&&(this.id=C[this.idAttribute]);s=r.changes={};var K=this.attributes,n=this._escapedAttributes,x=this._previousAttributes||{};for(E in C){g=C[E];if(!h.isEqual(K[E],g)||r.unset&&h.has(K,E)){delete n[E];(r.silent?this._silent:
s)[E]=true}r.unset?delete K[E]:K[E]=g;!h.isEqual(x[E],g)||h.has(K,E)!=h.has(x,E)?(this.changed[E]=g,r.silent||(this._pending[E]=true)):(delete this.changed[E],delete this._pending[E])}r.silent||this.change(r);return this},unset:function(g,s){(s||(s={})).unset=true;return this.set(g,null,s)},clear:function(g){(g||(g={})).unset=true;return this.set(h.clone(this.attributes),g)},fetch:function(g){g=g?h.clone(g):{};var s=this,r=g.success;g.success=function(C,E,K){if(!s.set(s.parse(C,K),g))return false;
r&&r(s,C)};g.error=k.wrapError(g.error,s,g);return(this.sync||k.sync).call(this,"read",this,g)},save:function(g,s,r){var C,E;h.isObject(g)||null==g?(C=g,r=s):(C={},C[g]=s);r=r?h.clone(r):{};if(r.wait){if(!this._validate(C,r))return false;E=h.clone(this.attributes)}g=h.extend({},r,{silent:true});if(C&&!this.set(C,r.wait?g:r))return false;var K=this,n=r.success;r.success=function(x,v,D){v=K.parse(x,D);if(r.wait){delete r.wait;v=h.extend(C||{},v)}if(!K.set(v,r))return false;n?n(K,x):K.trigger("sync",
K,x,r)};r.error=k.wrapError(r.error,K,r);s=this.isNew()?"create":"update";s=(this.sync||k.sync).call(this,s,this,r);r.wait&&this.set(E,g);return s},destroy:function(g){g=g?h.clone(g):{};var s=this,r=g.success,C=function(){s.trigger("destroy",s,s.collection,g)};if(this.isNew())return C(),false;g.success=function(K){g.wait&&C();r?r(s,K):s.trigger("sync",s,K,g)};g.error=k.wrapError(g.error,s,g);var E=(this.sync||k.sync).call(this,"delete",this,g);g.wait||C();return E},url:function(){var g=ba(this,"urlRoot")||
ba(this.collection,"url")||ea();return this.isNew()?g:g+("/"==g.charAt(g.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(g){return g},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(g){g||(g={});var s=this._changing;this._changing=true;for(var r in this._silent)this._pending[r]=true;var C=h.extend({},g.changes,this._silent);this._silent={};for(r in C)this.trigger("change:"+r,this,this.get(r),g);if(s)return this;for(;!h.isEmpty(this._pending);){this._pending=
{};this.trigger("change",this,g);for(r in this.changed)!this._pending[r]&&!this._silent[r]&&delete this.changed[r];this._previousAttributes=h.clone(this.attributes)}this._changing=false;return this},hasChanged:function(g){return!arguments.length?!h.isEmpty(this.changed):h.has(this.changed,g)},changedAttributes:function(g){if(!g)return this.hasChanged()?h.clone(this.changed):false;var s,r=false,C=this._previousAttributes,E;for(E in g)if(!h.isEqual(C[E],s=g[E]))(r||(r={}))[E]=s;return r},previous:function(g){return!arguments.length||
!this._previousAttributes?null:this._previousAttributes[g]},previousAttributes:function(){return h.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(g,s){if(s.silent||!this.validate)return true;g=h.extend({},this.attributes,g);var r=this.validate(g,s);if(!r)return true;s&&s.error?s.error(this,r,s):this.trigger("error",this,r,s);return false}});var q=k.Collection=function(g,s){s||(s={});s.model&&(this.model=s.model);s.comparator&&(this.comparator=
s.comparator);this._reset();this.initialize.apply(this,arguments);g&&this.reset(g,{silent:true,parse:s.parse})};h.extend(q.prototype,d,{model:j,initialize:function(){},toJSON:function(g){return this.map(function(s){return s.toJSON(g)})},add:function(g,s){var r,C,E,K,n,x={},v={},D=[];s||(s={});g=h.isArray(g)?g.slice():[g];r=0;for(C=g.length;r<C;r++){if(!(E=g[r]=this._prepareModel(g[r],s)))throw Error("Can't add an invalid model to a collection");K=E.cid;n=E.id;x[K]||this._byCid[K]||null!=n&&(v[n]||
this._byId[n])?D.push(r):x[K]=v[n]=E}for(r=D.length;r--;)g.splice(D[r],1);r=0;for(C=g.length;r<C;r++){(E=g[r]).on("all",this._onModelEvent,this);this._byCid[E.cid]=E;null!=E.id&&(this._byId[E.id]=E)}this.length+=C;f.apply(this.models,[null!=s.at?s.at:this.models.length,0].concat(g));this.comparator&&this.sort({silent:true});if(s.silent)return this;r=0;for(C=this.models.length;r<C;r++)if(x[(E=this.models[r]).cid]){s.index=r;E.trigger("add",E,this,s)}return this},remove:function(g,s){var r,C,E,K;s||
(s={});g=h.isArray(g)?g.slice():[g];r=0;for(C=g.length;r<C;r++)if(K=this.getByCid(g[r])||this.get(g[r])){delete this._byId[K.id];delete this._byCid[K.cid];E=this.indexOf(K);this.models.splice(E,1);this.length--;s.silent||(s.index=E,K.trigger("remove",K,this,s));this._removeReference(K)}return this},push:function(g,s){g=this._prepareModel(g,s);this.add(g,s);return g},pop:function(g){var s=this.at(this.length-1);this.remove(s,g);return s},unshift:function(g,s){g=this._prepareModel(g,s);this.add(g,h.extend({at:0},
s));return g},shift:function(g){var s=this.at(0);this.remove(s,g);return s},get:function(g){return null==g?void 0:this._byId[null!=g.id?g.id:g]},getByCid:function(g){return g&&this._byCid[g.cid||g]},at:function(g){return this.models[g]},where:function(g){return h.isEmpty(g)?[]:this.filter(function(s){for(var r in g)if(g[r]!==s.get(r))return false;return true})},sort:function(g){g||(g={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");var s=h.bind(this.comparator,this);1==
this.comparator.length?this.models=this.sortBy(s):this.models.sort(s);g.silent||this.trigger("reset",this,g);return this},pluck:function(g){return h.map(this.models,function(s){return s.get(g)})},reset:function(g,s){g||(g=[]);s||(s={});for(var r=0,C=this.models.length;r<C;r++)this._removeReference(this.models[r]);this._reset();this.add(g,h.extend({silent:true},s));s.silent||this.trigger("reset",this,s);return this},fetch:function(g){g=g?h.clone(g):{};void 0===g.parse&&(g.parse=true);var s=this,r=
g.success;g.success=function(C,E,K){s[g.add?"add":"reset"](s.parse(C,K),g);r&&r(s,C)};g.error=k.wrapError(g.error,s,g);return(this.sync||k.sync).call(this,"read",this,g)},create:function(g,s){var r=this;s=s?h.clone(s):{};g=this._prepareModel(g,s);if(!g)return false;s.wait||r.add(g,s);var C=s.success;s.success=function(E,K){s.wait&&r.add(E,s);C?C(E,K):E.trigger("sync",g,K,s)};g.save(null,s);return g},parse:function(g){return g},chain:function(){return h(this.models).chain()},_reset:function(){this.length=
0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(g,s){s||(s={});g instanceof j?g.collection||(g.collection=this):(s.collection=this,g=new this.model(g,s),g._validate(g.attributes,s)||(g=false));return g},_removeReference:function(g){this==g.collection&&delete g.collection;g.off("all",this._onModelEvent,this)},_onModelEvent:function(g,s,r,C){("add"==g||"remove"==g)&&r!=this||("destroy"==g&&this.remove(s,C),s&&g==="change:"+s.idAttribute&&(delete this._byId[s.previous(s.idAttribute)],
this._byId[s.id]=s),this.trigger.apply(this,arguments))}});h.each("forEach,each,map,reduce,reduceRight,find,detect,filter,select,reject,every,all,some,any,include,contains,invoke,max,min,sortBy,sortedIndex,toArray,size,first,initial,rest,last,without,indexOf,shuffle,lastIndexOf,isEmpty,groupBy".split(","),function(g){q.prototype[g]=function(){return h[g].apply(h,[this.models].concat(h.toArray(arguments)))}});var u=k.Router=function(g){g||(g={});g.routes&&(this.routes=g.routes);this._bindRoutes();
this.initialize.apply(this,arguments)},w=/:\w+/g,A=/\*\w+/g,G=/[-[\]{}()+?.,\\^$|#\s]/g;h.extend(u.prototype,d,{initialize:function(){},route:function(g,s,r){k.history||(k.history=new N);h.isRegExp(g)||(g=this._routeToRegExp(g));r||(r=this[s]);k.history.route(g,h.bind(function(C){C=this._extractParameters(g,C);r&&r.apply(this,C);this.trigger.apply(this,["route:"+s].concat(C));k.history.trigger("route",this,s,C)},this));return this},navigate:function(g,s){k.history.navigate(g,s)},_bindRoutes:function(){if(this.routes){var g=
[],s;for(s in this.routes)g.unshift([s,this.routes[s]]);s=0;for(var r=g.length;s<r;s++)this.route(g[s][0],g[s][1],this[g[s][1]])}},_routeToRegExp:function(g){g=g.replace(G,"\\$&").replace(w,"([^/]+)").replace(A,"(.*?)");return RegExp("^"+g+"$")},_extractParameters:function(g,s){return g.exec(s).slice(1)}});var N=k.History=function(){this.handlers=[];h.bindAll(this,"checkUrl")},I=/^[#\/]/,R=/msie [\w.]+/;N.started=false;h.extend(N.prototype,d,{interval:50,getHash:function(g){return(g=(g?g.location:
window.location).href.match(/#(.*)$/))?g[1]:""},getFragment:function(g,s){if(null==g)if(this._hasPushState||s){g=window.location.pathname;var r=window.location.search;r&&(g+=r)}else g=this.getHash();g.indexOf(this.options.root)||(g=g.substr(this.options.root.length));return g.replace(I,"")},start:function(g){if(N.started)throw Error("Backbone.history has already been started");N.started=true;this.options=h.extend({},{root:"/"},this.options,g);this._wantsHashChange=false!==this.options.hashChange;
this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.options.pushState||!window.history||!window.history.pushState);g=this.getFragment();var s=document.documentMode;if(s=R.exec(navigator.userAgent.toLowerCase())&&(!s||7>=s)){this.iframe=m('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(g)}this._hasPushState?m(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?m(window).bind("hashchange",
this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=g;g=window.location;s=g.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,true),window.location.replace(this.options.root+"#"+this.fragment),true;this._wantsPushState&&this._hasPushState&&s&&g.hash&&(this.fragment=this.getHash().replace(I,""),window.history.replaceState({},document.title,g.protocol+
"//"+g.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},stop:function(){m(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);N.started=false},route:function(g,s){this.handlers.unshift({route:g,callback:s})},checkUrl:function(){var g=this.getFragment();g==this.fragment&&this.iframe&&(g=this.getFragment(this.getHash(this.iframe)));if(g==this.fragment)return false;this.iframe&&this.navigate(g);this.loadUrl()||
this.loadUrl(this.getHash())},loadUrl:function(g){var s=this.fragment=this.getFragment(g);return h.any(this.handlers,function(r){if(r.route.test(s))return r.callback(s),true})},navigate:function(g,s){if(!N.started)return false;if(!s||true===s)s={trigger:s};var r=(g||"").replace(I,"");this.fragment!=r&&(this._hasPushState?(0!=r.indexOf(this.options.root)&&(r=this.options.root+r),this.fragment=r,window.history[s.replace?"replaceState":"pushState"]({},document.title,r)):this._wantsHashChange?(this.fragment=
r,this._updateHash(window.location,r,s.replace),this.iframe&&r!=this.getFragment(this.getHash(this.iframe))&&(s.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,r,s.replace))):window.location.assign(this.options.root+g),s.trigger&&this.loadUrl(g))},_updateHash:function(g,s,r){r?g.replace(g.toString().replace(/(javascript:|#).*$/,"")+"#"+s):g.hash=s}});var S=k.View=function(g){this.cid=h.uniqueId("view");this._configure(g||{});this._ensureElement();this.initialize.apply(this,
arguments);this.delegateEvents()},X=/^(\S+)\s*(.*)$/,Q="model,collection,el,id,attributes,className,tagName".split(",");h.extend(S.prototype,d,{tagName:"div",$:function(g){return this.$el.find(g)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(g,s,r){g=document.createElement(g);s&&m(g).attr(s);r&&m(g).html(r);return g},setElement:function(g,s){this.$el&&this.undelegateEvents();this.$el=g instanceof m?g:m(g);this.el=this.$el[0];
false!==s&&this.delegateEvents();return this},delegateEvents:function(g){if(g||(g=ba(this,"events"))){this.undelegateEvents();for(var s in g){var r=g[s];h.isFunction(r)||(r=this[g[s]]);if(!r)throw Error('Method "'+g[s]+'" does not exist');var C=s.match(X),E=C[1];C=C[2];r=h.bind(r,this);E+=".delegateEvents"+this.cid;""===C?this.$el.bind(E,r):this.$el.delegate(C,E,r)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(g){this.options&&(g=h.extend({},this.options,
g));for(var s=0,r=Q.length;s<r;s++){var C=Q[s];g[C]&&(this[C]=g[C])}this.options=g},_ensureElement:function(){if(this.el)this.setElement(this.el,false);else{var g=ba(this,"attributes")||{};this.id&&(g.id=this.id);this.className&&(g["class"]=this.className);this.setElement(this.make(this.tagName,g),false)}}});j.extend=q.extend=u.extend=S.extend=function(g,s){var r=na(this,g,s);r.extend=this.extend;return r};var O={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};k.sync=function(g,s,r){var C=
O[g];r||(r={});var E={type:C,dataType:"json"};r.url||(E.url=ba(s,"url")||ea());if(!r.data&&s&&("create"==g||"update"==g)){E.contentType="application/json";E.data=JSON.stringify(s.toJSON())}k.emulateJSON&&(E.contentType="application/x-www-form-urlencoded",E.data=E.data?{model:E.data}:{});if(k.emulateHTTP&&("PUT"===C||"DELETE"===C)){k.emulateJSON&&(E.data._method=C);E.type="POST";E.beforeSend=function(K){K.setRequestHeader("X-HTTP-Method-Override",C)}}"GET"!==E.type&&!k.emulateJSON&&(E.processData=
false);return m.ajax(h.extend(E,r))};k.wrapError=function(g,s,r){return function(C,E){E=C===s?E:C;g?g(s,E,r):s.trigger("error",s,E,r)}};var aa=function(){},na=function(g,s,r){var C;C=s&&s.hasOwnProperty("constructor")?s.constructor:function(){g.apply(this,arguments)};h.extend(C,g);aa.prototype=g.prototype;C.prototype=new aa;s&&h.extend(C.prototype,s);r&&h.extend(C,r);C.prototype.constructor=C;C.__super__=g.prototype;return C},ba=function(g,s){return!g||!g[s]?null:h.isFunction(g[s])?g[s]():g[s]},ea=
function(){throw Error('A "url" property or function must be specified');}}).call(this);var FlashDetect=new function(){var c=this;c.installed=false;c.raw="";c.major=-1;c.minor=-1;c.revision=-1;c.revisionStr="";var o=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(f){return a(f)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(f){var k="6,0,21";try{f.AllowScriptAccess="always";k=a(f)}catch(h){}return k}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(f){return a(f)}}],a=function(f){var k=-1;try{k=f.GetVariable("$version")}catch(h){}return k};c.majorAtLeast=
function(f){return c.major>=f};c.minorAtLeast=function(f){return c.minor>=f};c.revisionAtLeast=function(f){return c.revision>=f};c.versionAtLeast=function(){var f=[c.major,c.minor,c.revision],k=Math.min(f.length,arguments.length);for(i=0;i<k;i++)if(f[i]>=arguments[i]){if(!(i+1<k&&f[i]==arguments[i]))return true}else return false};c.FlashDetect=function(){if(navigator.plugins&&navigator.plugins.length>0){var f=navigator.mimeTypes;if(f&&f["application/x-shockwave-flash"]&&f["application/x-shockwave-flash"].enabledPlugin&&
f["application/x-shockwave-flash"].enabledPlugin.description){f=f["application/x-shockwave-flash"].enabledPlugin.description;var k;k=f.split(/ +/);var h=k[2].split(/\./);k=k[3];k={raw:f,major:parseInt(h[0],10),minor:parseInt(h[1],10),revisionStr:k,revision:parseInt(k.replace(/[a-zA-Z]/g,""),10)||c.revision};c.raw=k.raw;c.major=k.major;c.minor=k.minor;c.revisionStr=k.revisionStr;c.revision=k.revision;c.installed=true}}else if(navigator.appVersion.indexOf("Mac")==-1&&window.execScript){f=-1;for(h=0;h<
o.length&&f==-1;h++){k=-1;try{k=new ActiveXObject(o[h].name)}catch(m){k={activeXError:true}}if(!k.activeXError){c.installed=true;f=o[h].version(k);if(f!=-1){k=f;var b=k.split(",");k={raw:k,major:parseInt(b[0].split(" ")[1],10),minor:parseInt(b[1],10),revision:parseInt(b[2],10),revisionStr:b[2]};c.raw=k.raw;c.major=k.major;c.minor=k.minor;c.revision=k.revision;c.revisionStr=k.revisionStr}}}}}()};FlashDetect.JS_RELEASE="1.0.4";(function(c){function o(){return c.mozAnimationStartTime||c.performance&&c.performance.now&&performance.now()||+new Date}var a={util:{},tracking:{},data:{},els:{},state:{},lib:jQuery};a.data.embedly_key="886d8cceec7711df84894040444cdc60";a.util.domain=function(b){return(document.location.host.indexOf("bitly")===-1?"http://bitly.com":"")+b};a.util.log=function(b,d){d||(d="INFO");try{return console?console.log(d+": "+b):false}catch(j){return false}};a.util.inherit=function(b,d){var j=function(){};j.prototype=
d.prototype;b.prototype=new j;b.prototype.constructor=b;b.superclass=d.prototype;if(d.prototype.constructor==Object.prototype.constructor)d.prototype.constructor=d};a.util.argsAsArray=function(b){return Array.prototype.slice.call(b)};a.util.hashToQueryString=function(b,d,j){var q=[];for(key in b)for(var u=$.isArray(b[key])?b[key]:[b[key]],w=0,A=u.length;w<A;w++)u[w]==="?"&&j?q.push(encodeURIComponent(key)+"="+u[w]):q.push(encodeURIComponent(key)+"="+encodeURIComponent(u[w]));b=q.length?"?"+q.join("&"):
"";return(d||"")+b};a.util.queryStringToHash=function(b){b=b||location.href;if(b.indexOf("?")>-1)b=b.substring(b.indexOf("?")+1);else return{};b=b.split("&");for(var d={},j=b.length;j;){var q=b[--j].split("=");d[decodeURIComponent(q[0].replace(/\+/g," "))]=decodeURIComponent(q[1].replace(/\+/g," "))}return d};a.util.stripQueryString=function(b){if(b.indexOf("?")>-1)b=b.substring(0,b.indexOf("?"));return b};a.util.modifyQueryParams=function(b,d){d=d||location.href;var j=a.util.stripQueryString(d),
q=a.util.queryStringToHash(d),u;for(u in b)if(b[u]===null)delete q[u];else q[u]=b[u];return a.util.hashToQueryString(q,j)};a.util.cleanURL=function(b){return b.replace(/https?:\/\//,"")};a.util.relativeTime=function(b,d){function j(I){var R="a",S;S=I.getHours();I=I.getMinutes();R=S>=12?"p":"a";return((S>=12?S-12:S)||12)+":"+(I<10?"0"+I:I)+R}d=d||{};var q=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],u=new Date(b*1E3),w=new Date,A=w-u,G="",N=u.getFullYear();w.getFullYear();
w=new Date;w.setHours(0);w.setMinutes(0);w.setSeconds(0);w.setMilliseconds(0);if(A>864E5||+u<+w){G+=q[u.getMonth()];G+=" ";G+=u.getDate();if(A>2592E7){G+=" ";G+=N}if(d.show_ts_for_days&&typeof d.show_ts_for_days==="number"&&d.show_ts_for_days<300&&A<864E5*parseInt(d.show_ts_for_days,10))G+=" "+j(u)}else G+=j(u);return G};a.ajax={GET:function(b){return a.ajax.makeRequest("GET",b)},POST:function(b){return a.ajax.makeRequest("POST",b)},PUT:function(b){return a.ajax.makeRequest("PUT",b)},DELETE:function(b){return a.ajax.makeRequest("DELETE",
b)},makeRequest:function(b,d){var j=new a.ajax.request(d);j.setMethod(b);j.url&&j.execute();return j},requestor:null};a.ajax.request=function(b){this.init(b)};a.ajax.request.prototype={init:function(b){b||(b={});if(a.util.isFunction(b))this._setSuccess(b);else{a.util.simpleExtend(this,b);if(this.url)this.url=this.api_base+this.url;if(!b.scope)this.scope=this;if(this.send_json)this.contentType="application/json";this.deferred=$.Deferred();this.promise=this.deferred.promise();b.error?this._setError(b.error,
this.scope):this._setError(this.error,this.scope);b.success?this._setSuccess(b.success,this.scope):this._setSuccess(this.success,this.scope)}},api_base:"",_setSuccess:function(b,d){if(!d)d=this.scope;var j=this,q=function(){var u=a.util.argsAsArray(arguments);a.util.checkResponseForError(u[0],j.error,d,u)||b.apply(d,u)};this.success=q;this.promise.done(q)},_setError:function(b,d){if(typeof b!=="undefined"){d||(d=this);var j=function(){var q=a.util.argsAsArray(arguments);b.apply(d,q)};this.error=j;
this.promise.fail(j)}else this.error=a.ajax.request.prototype.error},setMethod:function(b){switch(b.toLowerCase()){case "delete":case "put":case "post":this.method=b.toUpperCase();break;default:this.method="GET"}},execute:function(b,d){var j=this;if(b)this.url=b;if(d)this.data=d;if(this.url){var q={type:this.method,url:this.url,data:this.data,success:this.deferred.resolve,dataType:this.dataType,contentType:this.contentType,error:this.deferred.reject,async:this.async,timeout:this.timeout,binary:false,
traditional:this.traditional,beforeSend:function(u){j.binary&&u.overrideMimeType("text/plain; charset=x-user-defined;");$.cookie&&u.setRequestHeader("X-XSRFToken",$.cookie.get("_xsrf"))}};this.singleThreaded&&this.xhr&&this.xhr.abort();this.xhr=a.ajax.requestor(q);return this}else throw"Must have a url set to execute";},abort:function(){this.xhr&&this.xhr.abort()},data:{},timeout:2E4,singleThreaded:false,dataType:"json",contentType:"application/x-www-form-urlencoded",scope:this,async:true,method:"GET",
form:false,traditional:true,success:function(){a.util.log("default success")},error:function(){a.util.log("error making a "+this.method+" request to "+this.url,"ERROR")}};a.util.destroyClass=function(b){b=b||{};if(this.hasOwnProperty("els")){for(var d in this.els){b.remove_els&&this.els[d].remove();this.els[d]=null;delete this.els[d]}delete this.els}if(this.hasOwnProperty("obj")){for(var j in this.obj){this.obj[j].destroy&&this.obj[j].destroy();this.obj[j]=null;delete this.obj[j]}delete this.obj}if(this.hasOwnProperty("data")){for(var q in this.data){this.data[q]=
null;delete this.data[q]}delete this.data}if(this.hasOwnProperty("state")){for(var u in this.state){this.state[u]=null;delete this.state[u]}delete this.state}if(this.hasOwnProperty("util")){for(var w in this.util){this.util[w]=null;delete this.util[w]}delete this.util}this.hasOwnProperty("parents")&&delete this.parents;if(this.hasOwnProperty("el")){this.el.remove();this.el=null;delete this.el}return this};a.util.initClass=function(b){if(b)this.el=$(b);this.data={};this.state={};this.els={};this.obj=
{};this.parents={};return this};a.util.isFunction=a.lib.isFunction;a.util.simpleExtend=a.lib.extend;a.ajax.requestor=a.lib.ajax;a.Eventer={evt:{},delegate:function(b){if(!b)return false;var d=b.del?$(b.del):$("body"),j=b.el?$(b.el):$("body"),q=b.evt,u=b.cb,w=b.scope;b=b.ns||"_default";var A=d.data("bitly_evt_id");if(!A){A=this.createEvtId();d.data("bitly_evt_id",A)}if(j&&q&&u){var G=j.data("bitly_evt_id");if(!G){G=this.createEvtId();j.data("bitly_evt_id",G)}this.evt.hasOwnProperty(A)||(this.evt[A]=
{});if(!this.evt[A].hasOwnProperty(q)){this.evt[A][q]={};this._bind(d,q)}d=this.evt[A][q];d.hasOwnProperty(G)||(d[G]=[]);d[G].push({ns:b,cb:function(N,I){return u.call(w,N,I)}})}},undelegate:function(b){var d=b.del?$(b.del):$("body"),j=b.el?$(b.el):$("body"),q=b.evt;b=b.ns||"*";d=d.data("bitly_evt_id");j=j.data("bitly_evt_id");if(d&&j&&this.evt[d]&&this.evt[d][q]&&this.evt[d][q][j]){var u=this.evt[d][q][j];if(b==="*")delete this.evt[d][q][j];else{for(var w=[],A=0,G=u.length;A<G;A++)u[A].ns!==b&&w.push(u[A]);
if(w.length)this.evt[d][q][j]=w;else delete this.evt[d][q][j]}}},_bind:function(b,d){var j=b.data("bitly_evt_id");b.bind(d,function(q,u){if(!j)return true;for(var w=$(q.target),A=w.data("bitly_evt_id");w.length;){if(A&&a.Eventer.evt[j]&&a.Eventer.evt[j][d]&&a.Eventer.evt[j][d][A]&&a.Eventer.evt[j][d][A].length){A=a.Eventer.evt[j][d][A];for(var G=false,N=0,I=A.length;N<I;N++){G=A[N].cb(q,u);if(typeof G!=="undefined"&&!G)return G;if(q.isImmediatePropagationStopped())return false}if(q.isPropagationStopped()||
q.isDefaultPrevented())return false}w=w.parent();A=w.data("bitly_evt_id")}})},bind:function(b){b.del=b.el;this.delegate(b);return this},unbind:function(b){b.del=b.el;this.undelegate(b);return this},trigger:function(b,d,j){d=d||{};j=j?$(j):$("body");j.trigger(b,[d]);return this},createEvtId:function(){return"evt_"+Math.random().toString().replace("0.","")}};a.util.checkResponseForError=function(b,d,j,q){if(b&&b.status_code&&b.status_code!=200){d.apply(j||null,q);return true}return false};a.util.timeStamp=
function(b){if(!b)return"A long time ago.";return(new Date(b*1E3)).toDateString()};a.util.preserveNewline=function(b){return b.replace(/\n/g,"<br/>")};a.util.savePreference=function(b,d,j){a.ajax.POST({url:"/data/preferences",data:{key:b,value:d},success:function(q){if(q.data&&q.data.preferences&&q.data.preferences.length){var u=q.data.preferences[0];if(u.history_privacy==="0"||u.history_privacy==="1")u.history_privacy=parseInt(u.history_privacy,10)?"public":"private"}typeof j==="function"?j(q):$.noop()},
error:function(){console.log("Error updating preferences to: ",b,d)}})};a.util.timeAgoInWords=function(b,d){if(typeof b=="string")b=Date.parse(b);else if(typeof b==="undefined")b=+new Date;if(typeof d=="string")d=Date.parse(d);else if(typeof d==="undefined")d=+new Date;if(!b)return"some time ago";var j=d-b,q=Math.floor(j/6E4),u=Math.floor(j/36E5),w=Math.floor(j/864E5);j=Math.floor(j/31536E6);var A="ago";return j&&j>0?"over a year ago":w&&w>0?w+" day"+(w>1?"s ":" ")+A:u&&u>0?"about "+u+" hour"+(u>
1?"s ":" ")+A:q&&q>0?q+" minute"+(q>1?"s ":" ")+A:"just now"};a.util.scrollToTop=function(b,d){a.util.scrollTo({dur:b,interval:d})};a.util.scrollToEl=function(b){b=b||{};if(typeof b==="string"||"nodeType"in b||b instanceof $)b={el:b};if(!b.el)return $.Deferred().reject();var d=$(b.el),j=0;if(!d.length)return $.Deferred().reject();if(typeof b.offset==="number")j=b.offset;if(b.bottom){j=document.body.scrollHeight;var q=document.body.clientHeight;d=j-(d.offset().top+d.outerHeight(true));b.end=j-d-q}else b.end=
d.offset().top+j;return a.util.scrollTo(b)};a.util.scrollTo=function(b){function d(S){S=S||o();var X=S-R,Q=true;if(X){R=S;S=X/j*A;G-=S;if(S>=0&&G<=q||S<=0&&G>=q){G=q;Q=false}if(u===document.body)window.scrollTo(0,G);else u.scrollTop=G}if(Q)window.reqAnimFrame(d);else{w&&typeof w==="function"&&w.call(window);I.resolve(window)}}b=b||{};var j=b.dur||150,q=b.end||0,u=b.scroll_el||document.body,w=b.onfinish,A=b.dist,G,N,I=$.Deferred();if(u.scrollTop){G=u.scrollTop;b=u.clientHeight;N=u.scrollHeight}else{G=
document.documentElement.scrollTop;b=document.documentElement.clientHeight;N=document.documentElement.scrollHeight}if(A)q=G+A;q=q>=G?Math.min(q,N-b):Math.max(q,0);A=G-q;var R=o();window.reqAnimFrame(d);return I.promise()};a.util.displayDomain=function(b,d){if(b&&b.domain)return b.domain;return!d&&a.data.domain_preference||a.data.default_short_domain||"bit.ly"};a.util.formatDate=function(b,d){d||(d=new Date);if(typeof d==="number")d=new Date(d);var j={Month:function(u,w){var A=$._("January February March April May June July August September October November December").split(" ")[u];
if(w&&typeof w==="number")return A.substring(0,w);return A},Day:function(u,w){var A=$._("Sunday Monday Tuesday Wednesday Thursday Friday Saturday").split(" ")[u];if(w&&typeof w==="number")return A.substring(0,w);return A},Hours:function(u){if(u>12)u-=12;else u||(u=12);return u},Date:function(u,w){if(u<10&&!w)u="0"+u;return u},ampm:function(u){if(u<12)return"AM";return"PM"},Minutes:function(u){if(u<10)return"0"+u;return u},zpad:function(u){if(u<10)return"0"+u;return u},zpad1:function(u){return j.zpad(u+
1)}},q={d:{m:"Date"},D:{m:"Date"},m:{m:"Month",d:"zpad1"},b:{m:"Month"},B:{m:"Month"},I:{m:"Hours"},p:{m:"Hours",d:"ampm"},M:{m:"Minutes"},y:{m:"FullYear"},Y:{m:"FullYear"}};return b.replace(/\%(.){1}/g,function(u,w){var A;if(w in q){var G=q[w];if("m"in G&&"get"+G.m in d){A=d["get"+G.m]();G=G.d||G.m;if(G in j){var N=null;if(w==w.toLowerCase())N=3;A=j[G](A,N)}}}return A})};a.util.isUrl=function(b){return b.search(RegExp("^("+f+k+h+")","i"))===-1?false:true};a.util.validateUrl=function(b){matches=b.match(m);
if(!matches)return null;return matches};var f="(?:(https?|ftp|itms)://)?",k="(?:(?:[^\\s\\!\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\\\[\\]\\^\\_`\\{\\|\\}\\~]+\\.)+(?:aero|arpa|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|local|example|invalid|test|\u0645\u0635\u0631|\u0440\u0444|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|\u0627\u0645\u0627\u0631\u0627\u062a|xn--wgbh1c|xn--p1ai|xn--mgberp4a5d4ar|xn--mgbaam7a8h|\u4e2d\u56fd|\u4e2d\u570b|\u9999\u6e2f|\u0627\u0644\u0627\u0631\u062f\u0646|\u0641\u0644\u0633\u0637\u064a\u0646|\u0642\u0637\u0631|\u0dbd\u0d82\u0d9a\u0dcf|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u53f0\u7063|\u53f0\u6e7e|\u0e44\u0e17\u0e22|\u062a\u0648\u0646\u0633|xn--fiqs8S|xn--fiqz9S|xn--j6w193g|xn--mgbayh7gpa|xn--ygbi2ammx|xn--wgbl6a|xn--fzc2c9e2c|xn--xkc2al3hye2a|xn--kpry57d|xn--kprw13d|xn--o3cw4h|xn--pgbs0dh|\u0625\u062e\u062a\u0628\u0627\u0631|\u0622\u0632\u0645\u0627\u06cc\u0634\u06cc|\u6d4b\u8bd5|\u6e2c\u8a66|\u0438\u0441\u043f\u044b\u0442\u0430\u043d\u0438\u0435|\u092a\u0930\u0940\u0915\u094d\u0937\u093e|\u03b4\u03bf\u03ba\u03b9\u03bc\u03ae|\ud14c\uc2a4\ud2b8|\u05d8\u05e2\u05e1\u05d8|\u30c6\u30b9\u30c8|\u0baa\u0bb0\u0bbf\u0b9f\u0bcd\u0b9a\u0bc8|xn--kgbechtv|xn--hgbk6aj7f53bba|xn--0zwm56d|xn--g6w251d|xn--80akhbyknj4f|xn--11b5bs3a9aj6g|xn--jxalpdlp|xn--9t4b11yi5a|xn--deba0ad|xn--zckzah|xn--hlcj6aya9esc7a|[a-z]{2})(?::[0-9]+)?|(?:[0-9]{1,3}\\.){3}(?:[0-9]{1,3}))",
h="/?(?:\\S*[^\\s\\.,!\\)\\?])?",m=RegExp("("+f+k+h+")","gi");a.util.fullUriRegex=m;if(!window.reqAnimFrame)window.reqAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){return window.setTimeout(function(){b((new Date).getTime())},1E3/60)}}();a.util.checkPreviousSave=function(b,d){b.match(/^https?\:\/\//)||(b="http://"+b);a.ajax.POST({url:"/data/beta/user/link_lookup",
data:{url:b},success:function(j){if(j&&j.data&&j.data.link_lookup&&j.data.link_lookup.length&&j.data.link_lookup[0].link){if(d&&d.found)d.found.call(d.scope||window,j.data.link_lookup[0])}else if(d&&d.not_found)d.not_found.call(d.scope||window)},error:function(){if(d&&d.not_found)d.not_found.call(d.scope||window)},scope:d.scope||this})};a.util.extractEmbedlySrc=function(b){if(b.indexOf("i.embed.ly")>-1)return a.util.queryStringToHash(b).url||b;return b};a.util.rebuildEmbedlySrc=function(b,d,j){if(j&&
b===j)return b;if(b.indexOf("embed.ly")<0){b=$.extend({key:a.data.embedly_key,url:b},d);return a.util.hashToQueryString(b,"https://i.embed.ly")}return b};a.util.isFeatureFlagEnabled=function(){var b=Array.prototype.slice.call(arguments);if(!a.data.enabled_feature_flags)return false;for(var d=b.length,j;d--;){j=b[d];if(a.data.enabled_feature_flags.hasOwnProperty(j))return true}return false};a.util.setCaretPosition=function(b,d){b=$(b);if(b.length){b.focus();var j=b[0];if(d===-1)d=b.val().length;if(j.setSelectionRange)try{j.setSelectionRange(d,
d)}catch(q){}else if(j.createTextRange){j=j.createTextRange();j.collapse(true);j.moveEnd("character",d);j.moveStart("character",d);j.select()}}};a.util.doGetCaretPosition=function(b){b=$(b);if(b.length){b=b[0];var d=0;if(document.selection){b.focus();d=document.selection.createRange();d.moveStart("character",-b.value.length);d=d.text.length}else if(b.selectionStart||b.selectionStart=="0")d=b.selectionStart;return d}};a.util.setSelected=function(b,d,j){if(b.setSelectionRange)try{b.setSelectionRange(d,
j)}catch(q){}else if(b.createTextRange){b=b.createTextRange();b.collapse(true);b.moveEnd("character",j);b.moveStart("character",d);b.select()}};a.util.selectText=function(b){var d,j;j=window.getSelection&&window.getSelection();d=document.createRange&&document.createRange()||document.body.createTextRange&&document.body.createTextRange();if(d.moveToElementText&&d.select){d.moveToElementText(b);return d.select()}else if(d.selectNodeContents&&j.removeAllRanges&&j.addRange){d.selectNodeContents(b);j.removeAllRanges();
return j.addRange(d)}else if(j.getBaseAndExtent)return j.setBaseAndExtent(b,0,b,1)};a.util.clearSelectedText=function(){if(window.getSelection)if(window.getSelection().empty)window.getSelection().empty();else window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges();else document.selection&&document.selection.empty()};a.util.collectionSortHandler=function(b){if(!this.sortByField||!this.sortByAdapter)throw Error("SORT INTERFACE NOT SUPPORTED");var d=b.split("_");b=d[0];d=d.length===
1?"desc":d[1];var j={};j.descending=d.toLowerCase()==="asc"?false:true;b=b.toLowerCase();switch(b){case "time":this.sortByField("ts",j);App.Dispatch.trigger("UI.BitmarkList:sort",b+"_"+d);break;case "clicks":this.sortByAdapter(SortAdapters.clicks,j);App.Dispatch.trigger("UI.BitmarkList:sort",b+"_"+d);break;case "title":this.sortByField("title",j);App.Dispatch.trigger("UI.BitmarkList:sort",b+"_"+d)}};window.BITLY=a})(window);(function(c){c=c||"newT";var o=function(d){this.init(d||{})},a=/\<[^\>]+\>|\&[^ ]+;/,f={},k=Array.prototype.slice;o.prototype={constructor:o.prototype.constructor,version:"1.1.3",init:function(d){this.options={if_attr:"when",local_safe:"_safe",safe_mode:true};for(var j in d)this.options[j]=d[j];this.templates={};this.__createMethods();return this},save:function(d,j){var q=d.split("."),u="global";d=q[0];if(q.length>1)u=q[1];this.templates.hasOwnProperty(u)||(this.templates[u]={});this.templates[u][d]=
j;return this},render:function(d,j,q){var u="global",w,A;if(typeof d!=="function"){A=d.split(".");d=A[0];if(A.length>1)u=A[1];d=this.templates[u][d]}q=q||{};q.scope=q.scope||null;q.data=j;if(q.preData)q.data=q.preData.call(q.scope,q.data);q.pre&&q.pre.call(q.scope,q.data);this.cur_options=q;j=d(q.data,q._i,q._idx);if(typeof j==="object"&&j.constructor===[].constructor){d=j;j=document.createDocumentFragment();for(w in d)j.appendChild(d[w])}q.el&&q.el.appendChild(j);q.post&&q.post.call(q.scope,j,q.data);
this.cur_options=null;delete q;return j},renderToString:function(d,j,q){q=q||{};delete q.el;var u=document.createElement("div");u.appendChild(this.render(d,j,q));return u.innerHTML},eachRender:function(d,j,q){q=q||{};if(!this.checkRender(q))return"";var u=document.createDocumentFragment(),w=0,A;q.el=u;for(A in d)if(d.hasOwnProperty(A)){q._i=A;q._idx=w++;this.render(j,d[A],q)}delete q;return u},each:function(d,j,q){q=q||{};if(!this.checkRender(q))return"";this.cur_options=q;q=document.createDocumentFragment();
var u,w=0,A;for(A in d)if(d.hasOwnProperty(A)){(u=j(d[A],A,w))&&q.appendChild(u);w+=1}this.cur_options=null;return q},checkRender:function(d){if(this.options.if_attr in d&&!d[this.options.if_attr])return false;return true},__createMethods:function(){var d="a abbr address area article aside audio b base bdi bdo blockquote body br button canvas caption cite code col colgroup command datalist dd del details device dfn div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link map mark menu meta meter nav noscript object ol optgroup option output p param pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track ul var video wbr".split(" ");
d.push("frag");this.addEls(d,true);return this},_createEl:function(d){if(d in f&&f[d].cloneNode)return f[d].cloneNode(false);f[d]=document.createElement(d);return f[d].cloneNode(false)},element:function(d,j,q){var u=k.call(arguments,1),w=d==="frag"?document.createDocumentFragment():this._createEl(d);if(u.length)q=u;else return w;if(j=u[0]&&u[0].toString()==="[object Object]"?q.shift():null){var A;if(!this.checkRender(j))return"";delete j[this.options.if_attr];if(this.options.local_safe in j){A=!!j[this.options.local_safe];
delete j[this.options.local_safe]}for(attr in j)switch(attr.toLowerCase()){case "clss":case "classname":w.className=j[attr].join?j[attr].join(" "):j[attr];break;case "style":w.cssText=w.style.cssText=j[attr];break;default:if(attr.charAt(0)==="_"){u=attr.substring(1);j[attr]&&w.setAttribute(u,u)}else w.setAttribute(attr,j[attr])}}var G;u=0;for(var N=q.length;u<N;u++){G=q[u];switch(typeof G){case "string":this.addText(w,G,A);break;case "number":w.appendChild(document.createTextNode(G));break;case "function":G=
G();typeof G=="string"?this.addText(w,G,A):w.appendChild(G);break;case "undefined":break;default:try{w.appendChild(G)}catch(I){w.appendChild(document.createTextNode(G))}}}return w},addText:function(d,j,q){if(!this.isSafeMode(q)&&j.match(a))d.innerHTML=j;else d.appendChild(document.createTextNode(j));if(d.type&&d.type.toLowerCase()==="textarea")d.value=j;return this},setOption:function(d,j){if(typeof d==="object")for(var q in d)this.options[q]=d[q];else this.options[d]=j;return this},safeMode:function(d){if(typeof d==
"undefined")d=true;this.options.safe_mode=!!d;return this},isSafeMode:function(d){if(typeof d!="undefined")return!!d;if(this.cur_options&&"safe_mode"in this.cur_options)return!!this.cur_options.safe_mode;return!!this.options.safe_mode},clone:function(d){return new o(d)},extend:function(d,j,q,u){if(u){if(!this.hasOwnProperty(d)||q){this[d]=j;return true}}else if(!(d in o.prototype)||q){o.prototype[d]=j;return true}return false},addEls:function(d,j,q){if(typeof d==="string")d=d.split(" ");for(var u=
this,w,A=o.prototype.element,G=0,N=d.length;G<N;G++)(function(I){u.extend(I,function(){w=k.call(arguments);w.unshift(I);return A.apply(u,w)},j,q)})(d[G]);delete u;return this},noConflict:function(d){d=d||"__newT";try{delete window[b]}catch(j){window[b]=undefined}window[c]=h;window[d]=m;b=d;return this}};if(typeof module!=="undefined"&&module.exports!=null)module.exports=new o;else{var h=window[c],m,b=c;window[c]=m=new o}})();(function(c){function o(n){return n.replace(/,/g,".").replace(/[^0-9\.]/g,"")}var a,f={bridge:null,version:"0.0.0",disabled:null,outdated:null,ready:null},k={},h=0,m={},b=0,d={},j=null,q=null,u=function(){var n,x,v,D,J="ZeroClipboard.swf";if(!(document.currentScript&&(D=document.currentScript.src))){var L=document.getElementsByTagName("script");if("readyState"in L[0])for(n=L.length;n--;){if(L[n].readyState==="interactive"&&(D=L[n].src))break}else if(document.readyState==="loading")D=L[L.length-1].src;
else{for(n=L.length;n--;){v=L[n].src;if(!v){x=null;break}v=v.split("#")[0].split("?")[0];v=v.slice(0,v.lastIndexOf("/")+1);if(x==null)x=v;else if(x!==v){x=null;break}}if(x!==null)D=x}}if(D){D=D.split("#")[0].split("?")[0];J=D.slice(0,D.lastIndexOf("/")+1)+J}return J}(),w=function(){var n=/\-([a-z])/g,x=function(v,D){return D.toUpperCase()};return function(v){return v.replace(n,x)}}(),A=function(n){if(!n)n=c.event;var x;if(this!==c)x=this;else if(n.target)x=n.target;else if(n.srcElement)x=n.srcElement;
g.activate(x)},G=function(n,x){if(!n||n.nodeType!==1)return n;if(n.classList){n.classList.contains(x)||n.classList.add(x);return n}if(x&&typeof x==="string"){var v=(x||"").split(/\s+/);if(n.nodeType===1)if(n.className){for(var D=" "+n.className+" ",J=n.className,L=0,P=v.length;L<P;L++)if(D.indexOf(" "+v[L]+" ")<0)J+=" "+v[L];n.className=J.replace(/^\s+|\s+$/g,"")}else n.className=x}return n},N=function(n,x){if(!n||n.nodeType!==1)return n;if(n.classList){n.classList.contains(x)&&n.classList.remove(x);
return n}if(x&&typeof x==="string"||x===undefined){var v=(x||"").split(/\s+/);if(n.nodeType===1&&n.className)if(x){for(var D=(" "+n.className+" ").replace(/[\n\t]/g," "),J=0,L=v.length;J<L;J++)D=D.replace(" "+v[J]+" "," ");n.className=D.replace(/^\s+|\s+$/g,"")}else n.className=""}return n},I=function(n,x,v){if(typeof x.indexOf==="function")return x.indexOf(n,v);var D=x.length;if(typeof v==="undefined")v=0;else if(v<0)v=D+v;for(;v<D;v++)if(x.hasOwnProperty(v)&&x[v]===n)return v;return-1},R=function(n){if(typeof n===
"string")throw new TypeError("ZeroClipboard doesn't accept query strings.");if(!n.length)return[n];return n},S=function(n,x,v,D){D?c.setTimeout(function(){n.apply(x,v)},0):n.apply(x,v)},X=function(n){var x,v;if(n)if(typeof n==="number"&&n>0)x=n;else if(typeof n==="string"&&(v=parseInt(n,10))&&!isNaN(v)&&v>0)x=v;if(!x)if(typeof r.zIndex==="number"&&r.zIndex>0)x=r.zIndex;else if(typeof r.zIndex==="string"&&(v=parseInt(r.zIndex,10))&&!isNaN(v)&&v>0)x=v;return x||0},Q=function(n,x){if(n&&x!==false&&typeof console!==
"undefined"&&console&&(console.warn||console.log)){var v="`"+n+"` is deprecated. See docs for more info:\n    https://github.com/zeroclipboard/zeroclipboard/blob/master/docs/instructions.md#deprecations";console.warn?console.warn(v):console.log(v)}},O=function(){var n,x,v,D,J,L=arguments[0]||{};n=1;for(x=arguments.length;n<x;n++)if((v=arguments[n])!=null)for(D in v)if(v.hasOwnProperty(D)){J=v[D];if(L!==J)if(J!==undefined)L[D]=J}return L},aa=function(n){if(n==null||n==="")return null;n=n.replace(/^\s+|\s+$/g,
"");if(n==="")return null;var x=n.indexOf("//");n=x===-1?n:n.slice(x+2);var v=n.indexOf("/");if((n=v===-1?n:x===-1||v===0?null:n.slice(0,v))&&n.slice(-4).toLowerCase()===".swf")return null;return n||null},na=function(){var n=function(v,D){var J,L,P;if(v!=null&&D[0]!=="*"){if(typeof v==="string")v=[v];if(typeof v==="object"&&"length"in v){J=0;for(L=v.length;J<L;J++)if(v.hasOwnProperty(J))if(P=aa(v[J])){if(P==="*"){D.length=0;D.push("*");break}I(P,D)===-1&&D.push(P)}}}},x={always:"always",samedomain:"sameDomain",
never:"never"};return function(v,D){var J,L=D.allowScriptAccess;if(typeof L==="string"&&(J=L.toLowerCase())&&/^always|samedomain|never$/.test(J))return x[J];J=aa(D.moviePath);if(J===null)J=v;L=[];n(D.trustedOrigins,L);n(D.trustedDomains,L);var P=L.length;if(P>0){if(P===1&&L[0]==="*")return"always";if(I(v,L)!==-1){if(P===1&&v===J)return"sameDomain";return"always"}}return"never"}}(),ba=function(n){if(n==null)return[];if(Object.keys)return Object.keys(n);var x=[],v;for(v in n)n.hasOwnProperty(v)&&x.push(v);
return x},ea=function(){var n=false;if(typeof f.disabled==="boolean")n=f.disabled===false;else{if(typeof ActiveXObject==="function")try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))n=true}catch(x){}if(!n&&navigator.mimeTypes["application/x-shockwave-flash"])n=true}return n},g=function(n,x){if(!(this instanceof g))return new g(n,x);this.id=""+h++;m[this.id]={instance:this,elements:[],handlers:{}};n&&this.clip(n);if(typeof x!=="undefined"){Q("new ZeroClipboard(elements, options)",r.debug);
g.config(x)}this.options=g.config();if(typeof f.disabled!=="boolean")f.disabled=!ea();if(f.disabled===false&&f.outdated!==true)if(f.bridge===null){f.outdated=false;f.ready=false;var v,D,J=document.getElementById("global-zeroclipboard-html-bridge");if(!J){v=g.config();v.jsModuleId=typeof j==="string"&&j||typeof q==="string"&&q||null;J=na(c.location.host,r);var L,P,V,ma=[],U=[],ia=[];if(v.trustedOrigins)if(typeof v.trustedOrigins==="string")U.push(v.trustedOrigins);else if(typeof v.trustedOrigins===
"object"&&"length"in v.trustedOrigins)U=U.concat(v.trustedOrigins);if(v.trustedDomains)if(typeof v.trustedDomains==="string")U.push(v.trustedDomains);else if(typeof v.trustedDomains==="object"&&"length"in v.trustedDomains)U=U.concat(v.trustedDomains);if(U.length){L=0;for(P=U.length;L<P;L++)if(U.hasOwnProperty(L)&&U[L]&&typeof U[L]==="string")if(V=aa(U[L])){if(V==="*"){ia=[V];break}ia.push.apply(ia,[V,"//"+V,c.location.protocol+"//"+V])}}ia.length&&ma.push("trustedOrigins="+encodeURIComponent(ia.join(",")));
typeof v.jsModuleId==="string"&&v.jsModuleId&&ma.push("jsModuleId="+encodeURIComponent(v.jsModuleId));v=ma.join("&");L=r.moviePath+(r==null||r&&r.cacheBust===true&&r.useNoCache===true?(r.moviePath.indexOf("?")===-1?"?":"&")+"noCache="+(new Date).getTime():"");v='      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="'+L+'"/>         <param name="allowScriptAccess" value="'+J+'"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="'+
v+'"/>         <embed src="'+L+'"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="'+J+'"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="'+v+'"           scale="exactfit">         </embed>       </object>';
J=document.createElement("div");J.id="global-zeroclipboard-html-bridge";J.setAttribute("class","global-zeroclipboard-container");J.style.position="absolute";J.style.left="0px";J.style.top="-9999px";J.style.width="15px";J.style.height="15px";J.style.zIndex=""+X(r.zIndex);document.body.appendChild(J);J.innerHTML=v}if((v=document["global-zeroclipboard-flash-bridge"])&&(D=v.length))v=v[D-1];f.bridge=v||J.children[0].lastElementChild}};g.prototype.setText=function(n){if(n&&n!==""){k["text/plain"]=n;if(f.ready===
true&&f.bridge&&typeof f.bridge.setText==="function")f.bridge.setText(n);else f.ready=false}return this};g.prototype.setSize=function(n,x){if(f.ready===true&&f.bridge&&typeof f.bridge.setSize==="function")f.bridge.setSize(n,x);else f.ready=false;return this};var s=function(n){if(f.ready===true&&f.bridge&&typeof f.bridge.setHandCursor==="function")f.bridge.setHandCursor(n);else f.ready=false};g.prototype.destroy=function(){this.unclip();this.off();delete m[this.id]};g.version="1.3.5";var r={swfPath:u,
trustedDomains:c.location.host?[c.location.host]:[],cacheBust:true,forceHandCursor:false,zIndex:999999999,debug:true,title:null,autoActivate:true};g.config=function(n){typeof n==="object"&&n!==null&&O(r,n);if(typeof n==="string"&&n){if(r.hasOwnProperty(n))return r[n]}else{n={};for(var x in r)if(r.hasOwnProperty(x))n[x]=typeof r[x]==="object"&&r[x]!==null?"length"in r[x]?r[x].slice(0):O({},r[x]):r[x];return n}};g.destroy=function(){g.deactivate();for(var n in m)if(m.hasOwnProperty(n)&&m[n]){var x=
m[n].instance;x&&typeof x.destroy==="function"&&x.destroy()}if((n=C(f.bridge))&&n.parentNode){n.parentNode.removeChild(n);f.ready=null;f.bridge=null}};g.activate=function(n){if(a){N(a,r.hoverClass);N(a,r.activeClass)}a=n;G(n,r.hoverClass);E();var x=r.title||n.getAttribute("title");if(x){var v=C(f.bridge);v&&v.setAttribute("title",x)}if(!(x=r.forceHandCursor===true)){a:{if(c.getComputedStyle)x=c.getComputedStyle(n,null).getPropertyValue("cursor");else{x=w("cursor");x=n.currentStyle?n.currentStyle[x]:
n.style[x]}if(!x||x==="auto"){n=n.tagName.toLowerCase();if(n==="a"){n="pointer";break a}}n=x}x=n==="pointer"}s(x)};g.deactivate=function(){var n=C(f.bridge);if(n){n.style.left="0px";n.style.top="-9999px";n.removeAttribute("title")}if(a){N(a,r.hoverClass);N(a,r.activeClass);a=null}};var C=function(n){var x=/^OBJECT|EMBED$/;for(n=n&&n.parentNode;n&&x.test(n.nodeName)&&n.parentNode;)n=n.parentNode;return n||null},E=function(){if(a){var n=a,x={left:0,top:0,width:0,height:0,zIndex:X(r.zIndex)-1};if(n.getBoundingClientRect){n=
n.getBoundingClientRect();var v,D;if("pageXOffset"in c&&"pageYOffset"in c){v=c.pageXOffset;D=c.pageYOffset}else{v=1;if(typeof document.body.getBoundingClientRect==="function"){v=document.body.getBoundingClientRect();v=v.right-v.left;D=document.body.offsetWidth;v=Math.round(v/D*100)/100}D=v;v=Math.round(document.documentElement.scrollLeft/D);D=Math.round(document.documentElement.scrollTop/D)}var J=document.documentElement.clientTop||0;x.left=n.left+v-(document.documentElement.clientLeft||0);x.top=
n.top+D-J;x.width="width"in n?n.width:n.right-n.left;x.height="height"in n?n.height:n.bottom-n.top}if(n=C(f.bridge)){n.style.top=x.top+"px";n.style.left=x.left+"px";n.style.width=x.width+"px";n.style.height=x.height+"px";n.style.zIndex=x.zIndex+1}if(f.ready===true&&f.bridge&&typeof f.bridge.setSize==="function")f.bridge.setSize(x.width,x.height);else f.ready=false}return this};g.prototype.on=function(n,x){var v,D,J,L={},P=m[this.id]&&m[this.id].handlers;if(typeof n==="string"&&n)J=n.toLowerCase().split(/\s+/);
else if(typeof n==="object"&&n&&typeof x==="undefined")for(v in n)if(n.hasOwnProperty(v)&&typeof v==="string"&&v&&typeof n[v]==="function")this.on(v,n[v]);if(J&&J.length){v=0;for(D=J.length;v<D;v++){n=J[v].replace(/^on/,"");L[n]=true;P[n]||(P[n]=[]);P[n].push(x)}L.noflash&&f.disabled&&K.call(this,"noflash",{});L.wrongflash&&f.outdated&&K.call(this,"wrongflash",{flashVersion:f.version});L.load&&f.ready&&K.call(this,"load",{flashVersion:f.version})}return this};g.prototype.off=function(n,x){var v,D,
J,L,P,V=m[this.id]&&m[this.id].handlers;if(arguments.length===0)L=ba(V);else if(typeof n==="string"&&n)L=n.split(/\s+/);else if(typeof n==="object"&&n&&typeof x==="undefined")for(v in n)n.hasOwnProperty(v)&&typeof v==="string"&&v&&typeof n[v]==="function"&&this.off(v,n[v]);if(L&&L.length){v=0;for(D=L.length;v<D;v++){n=L[v].toLowerCase().replace(/^on/,"");if((P=V[n])&&P.length)if(x)for(J=I(x,P);J!==-1;){P.splice(J,1);J=I(x,P,J)}else V[n].length=0}}return this};g.prototype.handlers=function(n){var x,
v=null,D=m[this.id]&&m[this.id].handlers;if(D){if(typeof n==="string"&&n)return D[n]?D[n].slice(0):null;v={};for(x in D)if(D.hasOwnProperty(x)&&D[x])v[x]=D[x].slice(0)}return v};g.prototype.clip=function(n){n=R(n);for(var x=0;x<n.length;x++)if(n.hasOwnProperty(x)&&n[x]&&n[x].nodeType===1){if(n[x].zcClippingId)I(this.id,d[n[x].zcClippingId])===-1&&d[n[x].zcClippingId].push(this.id);else{n[x].zcClippingId="zcClippingId_"+b++;d[n[x].zcClippingId]=[this.id];if(r.autoActivate===true){var v=n[x],D=A;if(!(!v||
v.nodeType!==1))if(v.addEventListener)v.addEventListener("mouseover",D,false);else v.attachEvent&&v.attachEvent("onmouseover",D)}}v=m[this.id].elements;I(n[x],v)===-1&&v.push(n[x])}return this};g.prototype.unclip=function(n){var x=m[this.id];if(x){x=x.elements;var v;n=typeof n==="undefined"?x.slice(0):R(n);for(var D=n.length;D--;)if(n.hasOwnProperty(D)&&n[D]&&n[D].nodeType===1){for(v=0;(v=I(n[D],x,v))!==-1;)x.splice(v,1);var J=d[n[D].zcClippingId];if(J){for(v=0;(v=I(this.id,J,v))!==-1;)J.splice(v,
1);if(J.length===0){if(r.autoActivate===true){v=n[D];J=A;if(!(!v||v.nodeType!==1))if(v.removeEventListener)v.removeEventListener("mouseover",J,false);else v.detachEvent&&v.detachEvent("onmouseover",J)}delete n[D].zcClippingId}}}}return this};g.prototype.elements=function(){var n=m[this.id];return n&&n.elements?n.elements.slice(0):[]};r.hoverClass="zeroclipboard-is-hover";r.activeClass="zeroclipboard-is-active";r.trustedOrigins=null;r.allowScriptAccess=null;r.useNoCache=true;r.moviePath="ZeroClipboard.swf";
g.detectFlashSupport=function(){Q("ZeroClipboard.detectFlashSupport",r.debug);return ea()};g.dispatch=function(n,x){if(typeof n==="string"&&n){var v=n.toLowerCase().replace(/^on/,"");if(v){var D;if(a&&r.autoActivate===true){var J,L,P,V;D=[];if(a&&a.nodeType===1&&(J=a.zcClippingId)&&d.hasOwnProperty(J))if((J=d[J])&&J.length){L=0;for(P=J.length;L<P;L++)(V=m[J[L]].instance)&&V instanceof g&&D.push(V)}}else{P=[];V=ba(m);D=0;for(J=V.length;D<J;D++)(L=m[V[D]].instance)&&L instanceof g&&P.push(L);D=P}J=
0;for(L=D.length;J<L;J++)K.call(D[J],v,x)}}};g.prototype.setHandCursor=function(n){Q("ZeroClipboard.prototype.setHandCursor",r.debug);n=typeof n==="boolean"?n:!!n;s(n);r.forceHandCursor=n;return this};g.prototype.reposition=function(){Q("ZeroClipboard.prototype.reposition",r.debug);return E()};g.prototype.receiveEvent=function(n,x){Q("ZeroClipboard.prototype.receiveEvent",r.debug);if(typeof n==="string"&&n){var v=n.toLowerCase().replace(/^on/,"");v&&K.call(this,v,x)}};g.prototype.setCurrent=function(n){Q("ZeroClipboard.prototype.setCurrent",
r.debug);g.activate(n);return this};g.prototype.resetBridge=function(){Q("ZeroClipboard.prototype.resetBridge",r.debug);g.deactivate();return this};g.prototype.setTitle=function(n){Q("ZeroClipboard.prototype.setTitle",r.debug);if(n=n||r.title||a&&a.getAttribute("title")){var x=C(f.bridge);x&&x.setAttribute("title",n)}return this};g.setDefaults=function(n){Q("ZeroClipboard.setDefaults",r.debug);g.config(n)};g.prototype.addEventListener=function(n,x){Q("ZeroClipboard.prototype.addEventListener",r.debug);
return this.on(n,x)};g.prototype.removeEventListener=function(n,x){Q("ZeroClipboard.prototype.removeEventListener",r.debug);return this.off(n,x)};g.prototype.ready=function(){Q("ZeroClipboard.prototype.ready",r.debug);return f.ready===true};var K=function(n,x){n=n.toLowerCase().replace(/^on/,"");var v=x&&x.flashVersion&&o(x.flashVersion)||null,D=a,J=true;switch(n){case "load":if(v){if(!(parseFloat(o(v))>=10)){K.call(this,"onWrongFlash",{flashVersion:v});return}f.outdated=false;f.ready=true;f.version=
v}break;case "wrongflash":if(v&&!(parseFloat(o(v))>=10)){f.outdated=true;f.ready=false;f.version=v}break;case "mouseover":G(D,r.hoverClass);break;case "mouseout":r.autoActivate===true&&g.deactivate();break;case "mousedown":G(D,r.activeClass);break;case "mouseup":N(D,r.activeClass);break;case "datarequested":if(D){var L=D.getAttribute("data-clipboard-target");(L=(L=!L?null:document.getElementById(L))?L.value||L.textContent||L.innerText:D.getAttribute("data-clipboard-text"))&&this.setText(L)}J=false;
break;case "complete":if(k)for(var P in k)k.hasOwnProperty(P)&&delete k[P];if(v=D){a:{try{L=document.activeElement;break a}catch(V){}L=null}v=D!==L&&D.focus}v&&D.focus()}L=[this,x];if((v=m[this.id]&&m[this.id].handlers[n])&&v.length){var ma,U,ia=D||this;P=0;for(ma=v.length;P<ma;P++){U=v[P];D=ia;if(typeof U==="string"&&typeof c[U]==="function")U=c[U];if(typeof U==="object"&&U&&typeof U.handleEvent==="function"){D=U;U=U.handleEvent}typeof U==="function"&&S(U,D,L,J)}}return this};if(typeof define===
"function"&&define.amd)define(["require","exports","module"],function(n,x,v){j=v&&v.id||null;return g});else if(typeof module==="object"&&module&&typeof module.exports==="object"&&module.exports&&typeof c.require==="function"){q=module.id||null;module.exports=g}else c.ZeroClipboard=g})(function(){return this}());(function(c){c.extend({cookie:{get:function(o){return(o=document.cookie.match("\\b"+o+"=([^;]*)\\b"))?o[1]:undefined},write:function(o,a,f){if(f){var k=new Date;k.setTime(k.getTime()+f*864E5);f="; expires="+k.toGMTString()}else f="";document.cookie=o+"="+a+f+"; path=/"},debug:function(){console.log(document.cookie)}}})})(jQuery);(function(){var c,o,a,f;o=window.location.hostname.split(".");c=o.slice(o.length-2).join(".");this.App={Lib:{},Dispatch:_.extend({},Backbone.Events),Partials:{},State:{},Settings:{env:function(){switch(c){case "bitly.org":return"dev";case "bitly.net":return"staging";case "bitly.com":return"prod";default:return"none"}}()}};this.App.State.input_event="oninput"in window?"input":"propertychange";if(App.DEBUG){f=+new Date;a=function(k){if(k>=36E5)return(k/36E5).toFixed(1)+"h";if(k>=6E4)return(k/6E4).toFixed(1)+
"m";if(k>=1E3)return(k/1E3|0)+"s";return k+"ms"};App.Dispatch.on("all",function(){var k;k="+"+a(+new Date-f);return console.log(k,arguments)})}App.notify=function(k){return function(){var h;if(!$("#app-notification:visible").length){h=$("#app-notification");return h.removeClass("warning error success").text(k.msg).addClass(k.type).css("marginLeft",-h.width()/2).slideDown().delay(5E3).slideUp()}}};_.truthy=function(k){return k===true||k==="true"||k===1||k==="1"}}).call(this);(function(){var c,o,a;try{c=!!("placeholder"in document.createElement("input"))}catch(f){c=false}a=window.getComputedStyle||function(k){return k.currentStyle};o={};window.App||(window.App={});App.Lib||(App.Lib={});App.Lib.PlaceholderShim=function(){function k(h,m){if(m==null)m={};this.el=$(h);if(this.el.length){this.options=m;this.state={};this.orig_text=this.text=m.text||this.el.attr("placeholder");this.id="ph_"+parseInt(Math.random()*+new Date*1E3,10);this.container=$(document.createElement("b")).attr("id",
this.id);this.container.get(0).className="ph_shim";if(!c){this.setStyles();this.bindEvents();this.checkLength();this.insertContainer()}}}k.prototype.insertContainer=function(){this.container.insertBefore(this.el);return this.container.append(this.el.detach())};k.prototype.bindEvents=function(){var h=this;this.el.bind("keyup.ph",function(){return h.checkLength()});this.el.bind("keydown.ph",function(m){if(h.state.empty&&m.keyCode>=48&&!m.metaKey)return h.hide()});this.el.bind("paste.ph",function(){return setTimeout(function(){return h.checkLength()})});
this.el.bind("focus.ph",function(){return setTimeout(function(){return h.checkLength()})});this.el.bind("blur.ph",function(){if(h.state.noblur)return h.checkLength()});this.container.bind("click.ph",function(){return h.el.focus()});this.container.bind("mousedown.ph",function(m){if(h.isFocused()){h.state.noblur=true;if(h.state.empty)return m.preventDefault()}});return this};k.prototype.hide=function(){var h;if(!this.state.empty)return this;delete this.state.empty;this.container.removeClass("empty");
if((h=this.options.onhide)!=null)h.call(null);return this};k.prototype.show=function(){var h;if(this.state.empty)return this;this.state.empty=true;this.container.addClass("empty");if((h=this.options.onshow)!=null)h.call(null);return this};k.prototype.checkLength=function(){if(!this.el.val()||this.el.val().length===0)if(this.options.focus_only)this.isFocused()?this.show():this.hide();else this.show();else this.hide();delete this.state.noblur;return this};k.prototype.isFocused=function(){return this.el[0]===
document.activeElement};k.prototype.setText=function(h){var m;if(h==null)h=this.orig_text;this.text=h;if(c)this.el.attr("placeholder",h);else{h="#"+this.id+".empty:after";m={};m[h]={content:"'"+this.text+"'"};this.css(m)}return this};k.prototype.setStyles=function(){var h,m,b;b={};h="#"+this.id;if(this.options.group){o.hasOwnProperty(this.options.group)||(o[this.options.group]=this.setSpecificStyles());m=o[this.optins.group]}else m=this.setSpecificStyles();b[h]={display:this.el.css("display")||"inline-block",
position:"relative"};if(b[h].display==="inline")b[h].display="inline-block";b[""+h+".empty:after"]=$.extend({"font-weight":"normal","font-size":"13px",display:"block",content:"'"+this.text+"'",position:"absolute",top:"0",left:"0",right:"0",bottom:"0",opacity:".8","text-indent":"1px","background-color":"transparent","border-color":"transparent","border-style":"solid",color:"#AAA","text-align":"left"},m,this.options.css||{});this.css(b);return this};k.prototype.setSpecificStyles=function(){var h,m,
b;m=a(this.el.get(0),null);b={"line-height":m.lineHeight,"padding-top":m.paddingTop,"padding-left":m.paddingLeft,"padding-right":m.paddingRight,"padding-bottom":m.paddingBottom,"margin-top":m.marginTop,"margin-left":m.marginLeft,"margin-right":m.marginRight,"margin-bottom":m.marginBottom,"font-size":m.fontSize};h="0px";try{h=m.borderWidth||"0px"}catch(d){h="0px"}b["border-width"]=h;return b};k.prototype.css=function(h,m){var b,d,j,q,u,w,A;if(m==null)m="";if(document.getElementById("ph_shim_stylesheet"))q=
(u=document.getElementById("ph_shim_stylesheet"))!=null?u.sheet:void 0;else{q=document.createElement("style");q.id="ph_shim_stylesheet";q.type="text/css";document.getElementsByTagName("head")[0].appendChild(q);q=(d=document.getElementById("ph_shim_stylesheet"))!=null?d.sheet:void 0}q||(q=document.styleSheets[document.styleSheets.length-1]);if(h){A=[];for(j in h)if(h.hasOwnProperty(j)){u="";if(typeof h[j]==="object"){d=h[j];for(b in d)if(d.hasOwnProperty(b)){w=d[b];w=w.replace(/_vendor_/g,m);b=b.replace(/_vendor_/g,
m);u+=b+": "+w+"; "}}else{w=h[j];w=w.replace(/_vendor_/g,m);u+=w}j=j.replace(/_vendor_/g,m);try{if(q.insertRule)A.push(q.insertRule(j+" {"+u+"}",q.cssRules.length));else q.addRule?A.push(q.addRule(j,u,-1)):A.push(void 0)}catch(G){}}else A.push(void 0);return A}};return k}()}).call(this);(function(){var c;c=document.location.hostname.indexOf("bitly")===-1?"http://bitly.com/s/beta/flash/ZeroClipboard-1.3.5.swf":"/s/beta/flash/ZeroClipboard-1.3.5.swf";ZeroClipboard.config({moviePath:c,swfPath:c});c=new ZeroClipboard;c.on("noflash wrongflash",function(){$("body").addClass("no-zc");return _.extend(App.Platform,{flash:false})});c.on("load",function(){return _.extend(App.Platform,{flash:true})});c.on("complete",function(o,a){return $(this).trigger("zeroclipboard-complete",o,a)});App.$ZC=
c}).call(this);var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(c){var o="",a,f,k,h,m,b,d=0;for(c=Base64._utf8_encode(c);d<c.length;){a=c.charCodeAt(d++);f=c.charCodeAt(d++);k=c.charCodeAt(d++);h=a>>2;a=(a&3)<<4|f>>4;m=(f&15)<<2|k>>6;b=k&63;if(isNaN(f))m=b=64;else if(isNaN(k))b=64;o=o+Base64._keyStr.charAt(h)+Base64._keyStr.charAt(a)+Base64._keyStr.charAt(m)+Base64._keyStr.charAt(b)}return o},decode:function(c){var o="",a,f,k,h,m,b=0;for(c=c.replace(/[^A-Za-z0-9\+\/\=]/g,
"");b<c.length;){a=Base64._keyStr.indexOf(c.charAt(b++));f=Base64._keyStr.indexOf(c.charAt(b++));h=Base64._keyStr.indexOf(c.charAt(b++));m=Base64._keyStr.indexOf(c.charAt(b++));a=a<<2|f>>4;f=(f&15)<<4|h>>2;k=(h&3)<<6|m;o+=String.fromCharCode(a);if(h!=64)o+=String.fromCharCode(f);if(m!=64)o+=String.fromCharCode(k)}return o=Base64._utf8_decode(o)},_utf8_encode:function(c){c=c.replace(/\r\n/g,"\n");for(var o="",a=0;a<c.length;a++){var f=c.charCodeAt(a);if(f<128)o+=String.fromCharCode(f);else{if(f>127&&
f<2048)o+=String.fromCharCode(f>>6|192);else{o+=String.fromCharCode(f>>12|224);o+=String.fromCharCode(f>>6&63|128)}o+=String.fromCharCode(f&63|128)}}return o},_utf8_decode:function(c){for(var o="",a=0,f=c1=c2=0;a<c.length;){f=c.charCodeAt(a);if(f<128){o+=String.fromCharCode(f);a++}else if(f>191&&f<224){c2=c.charCodeAt(a+1);o+=String.fromCharCode((f&31)<<6|c2&63);a+=2}else{c2=c.charCodeAt(a+1);c3=c.charCodeAt(a+2);o+=String.fromCharCode((f&15)<<12|(c2&63)<<6|c3&63);a+=3}}return o}};
if(!window.btoa)window.btoa=Base64.encode;if(!window.atob)window.atob=Base64.decode;var hexcase=0,b64pad="";function hex_md5(c){return rstr2hex(rstr_md5(str2rstr_utf8(c)))}function b64_md5(c){return rstr2b64(rstr_md5(str2rstr_utf8(c)))}function any_md5(c,o){return rstr2any(rstr_md5(str2rstr_utf8(c)),o)}function hex_hmac_md5(c,o){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(c),str2rstr_utf8(o)))}function b64_hmac_md5(c,o){return rstr2b64(rstr_hmac_md5(str2rstr_utf8(c),str2rstr_utf8(o)))}
function any_hmac_md5(c,o,a){return rstr2any(rstr_hmac_md5(str2rstr_utf8(c),str2rstr_utf8(o)),a)}function md5_vm_test(){return hex_md5("abc").toLowerCase()=="900150983cd24fb0d6963f7d28e17f72"}function rstr_md5(c){return binl2rstr(binl_md5(rstr2binl(c),c.length*8))}
function rstr_hmac_md5(c,o){var a=rstr2binl(c);if(a.length>16)a=binl_md5(a,c.length*8);for(var f=Array(16),k=Array(16),h=0;h<16;h++){f[h]=a[h]^909522486;k[h]=a[h]^1549556828}a=binl_md5(f.concat(rstr2binl(o)),512+o.length*8);return binl2rstr(binl_md5(k.concat(a),640))}function rstr2hex(c){for(var o=hexcase?"0123456789ABCDEF":"0123456789abcdef",a="",f,k=0;k<c.length;k++){f=c.charCodeAt(k);a+=o.charAt(f>>>4&15)+o.charAt(f&15)}return a}
function rstr2b64(c){for(var o="",a=c.length,f=0;f<a;f+=3)for(var k=c.charCodeAt(f)<<16|(f+1<a?c.charCodeAt(f+1)<<8:0)|(f+2<a?c.charCodeAt(f+2):0),h=0;h<4;h++)o+=f*8+h*6>c.length*8?b64pad:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(k>>>6*(3-h)&63);return o}
function rstr2any(c,o){var a=o.length,f,k,h,m,b,d=Array(Math.ceil(c.length/2));for(f=0;f<d.length;f++)d[f]=c.charCodeAt(f*2)<<8|c.charCodeAt(f*2+1);var j=Math.ceil(c.length*8/(Math.log(o.length)/Math.log(2))),q=Array(j);for(k=0;k<j;k++){b=[];for(f=m=0;f<d.length;f++){m=(m<<16)+d[f];h=Math.floor(m/a);m-=h*a;if(b.length>0||h>0)b[b.length]=h}q[k]=m;d=b}a="";for(f=q.length-1;f>=0;f--)a+=o.charAt(q[f]);return a}
function str2rstr_utf8(c){for(var o="",a=-1,f,k;++a<c.length;){f=c.charCodeAt(a);k=a+1<c.length?c.charCodeAt(a+1):0;if(55296<=f&&f<=56319&&56320<=k&&k<=57343){f=65536+((f&1023)<<10)+(k&1023);a++}if(f<=127)o+=String.fromCharCode(f);else if(f<=2047)o+=String.fromCharCode(192|f>>>6&31,128|f&63);else if(f<=65535)o+=String.fromCharCode(224|f>>>12&15,128|f>>>6&63,128|f&63);else if(f<=2097151)o+=String.fromCharCode(240|f>>>18&7,128|f>>>12&63,128|f>>>6&63,128|f&63)}return o}
function str2rstr_utf16le(c){for(var o="",a=0;a<c.length;a++)o+=String.fromCharCode(c.charCodeAt(a)&255,c.charCodeAt(a)>>>8&255);return o}function str2rstr_utf16be(c){for(var o="",a=0;a<c.length;a++)o+=String.fromCharCode(c.charCodeAt(a)>>>8&255,c.charCodeAt(a)&255);return o}function rstr2binl(c){for(var o=Array(c.length>>2),a=0;a<o.length;a++)o[a]=0;for(a=0;a<c.length*8;a+=8)o[a>>5]|=(c.charCodeAt(a/8)&255)<<a%32;return o}
function binl2rstr(c){for(var o="",a=0;a<c.length*32;a+=8)o+=String.fromCharCode(c[a>>5]>>>a%32&255);return o}
function binl_md5(c,o){c[o>>5]|=128<<o%32;c[(o+64>>>9<<4)+14]=o;for(var a=1732584193,f=-271733879,k=-1732584194,h=271733878,m=0;m<c.length;m+=16){var b=a,d=f,j=k,q=h;a=md5_ff(a,f,k,h,c[m+0],7,-680876936);h=md5_ff(h,a,f,k,c[m+1],12,-389564586);k=md5_ff(k,h,a,f,c[m+2],17,606105819);f=md5_ff(f,k,h,a,c[m+3],22,-1044525330);a=md5_ff(a,f,k,h,c[m+4],7,-176418897);h=md5_ff(h,a,f,k,c[m+5],12,1200080426);k=md5_ff(k,h,a,f,c[m+6],17,-1473231341);f=md5_ff(f,k,h,a,c[m+7],22,-45705983);a=md5_ff(a,f,k,h,c[m+8],7,
1770035416);h=md5_ff(h,a,f,k,c[m+9],12,-1958414417);k=md5_ff(k,h,a,f,c[m+10],17,-42063);f=md5_ff(f,k,h,a,c[m+11],22,-1990404162);a=md5_ff(a,f,k,h,c[m+12],7,1804603682);h=md5_ff(h,a,f,k,c[m+13],12,-40341101);k=md5_ff(k,h,a,f,c[m+14],17,-1502002290);f=md5_ff(f,k,h,a,c[m+15],22,1236535329);a=md5_gg(a,f,k,h,c[m+1],5,-165796510);h=md5_gg(h,a,f,k,c[m+6],9,-1069501632);k=md5_gg(k,h,a,f,c[m+11],14,643717713);f=md5_gg(f,k,h,a,c[m+0],20,-373897302);a=md5_gg(a,f,k,h,c[m+5],5,-701558691);h=md5_gg(h,a,f,k,c[m+
10],9,38016083);k=md5_gg(k,h,a,f,c[m+15],14,-660478335);f=md5_gg(f,k,h,a,c[m+4],20,-405537848);a=md5_gg(a,f,k,h,c[m+9],5,568446438);h=md5_gg(h,a,f,k,c[m+14],9,-1019803690);k=md5_gg(k,h,a,f,c[m+3],14,-187363961);f=md5_gg(f,k,h,a,c[m+8],20,1163531501);a=md5_gg(a,f,k,h,c[m+13],5,-1444681467);h=md5_gg(h,a,f,k,c[m+2],9,-51403784);k=md5_gg(k,h,a,f,c[m+7],14,1735328473);f=md5_gg(f,k,h,a,c[m+12],20,-1926607734);a=md5_hh(a,f,k,h,c[m+5],4,-378558);h=md5_hh(h,a,f,k,c[m+8],11,-2022574463);k=md5_hh(k,h,a,f,c[m+
11],16,1839030562);f=md5_hh(f,k,h,a,c[m+14],23,-35309556);a=md5_hh(a,f,k,h,c[m+1],4,-1530992060);h=md5_hh(h,a,f,k,c[m+4],11,1272893353);k=md5_hh(k,h,a,f,c[m+7],16,-155497632);f=md5_hh(f,k,h,a,c[m+10],23,-1094730640);a=md5_hh(a,f,k,h,c[m+13],4,681279174);h=md5_hh(h,a,f,k,c[m+0],11,-358537222);k=md5_hh(k,h,a,f,c[m+3],16,-722521979);f=md5_hh(f,k,h,a,c[m+6],23,76029189);a=md5_hh(a,f,k,h,c[m+9],4,-640364487);h=md5_hh(h,a,f,k,c[m+12],11,-421815835);k=md5_hh(k,h,a,f,c[m+15],16,530742520);f=md5_hh(f,k,h,
a,c[m+2],23,-995338651);a=md5_ii(a,f,k,h,c[m+0],6,-198630844);h=md5_ii(h,a,f,k,c[m+7],10,1126891415);k=md5_ii(k,h,a,f,c[m+14],15,-1416354905);f=md5_ii(f,k,h,a,c[m+5],21,-57434055);a=md5_ii(a,f,k,h,c[m+12],6,1700485571);h=md5_ii(h,a,f,k,c[m+3],10,-1894986606);k=md5_ii(k,h,a,f,c[m+10],15,-1051523);f=md5_ii(f,k,h,a,c[m+1],21,-2054922799);a=md5_ii(a,f,k,h,c[m+8],6,1873313359);h=md5_ii(h,a,f,k,c[m+15],10,-30611744);k=md5_ii(k,h,a,f,c[m+6],15,-1560198380);f=md5_ii(f,k,h,a,c[m+13],21,1309151649);a=md5_ii(a,
f,k,h,c[m+4],6,-145523070);h=md5_ii(h,a,f,k,c[m+11],10,-1120210379);k=md5_ii(k,h,a,f,c[m+2],15,718787259);f=md5_ii(f,k,h,a,c[m+9],21,-343485551);a=safe_add(a,b);f=safe_add(f,d);k=safe_add(k,j);h=safe_add(h,q)}return[a,f,k,h]}function md5_cmn(c,o,a,f,k,h){return safe_add(bit_rol(safe_add(safe_add(o,c),safe_add(f,h)),k),a)}function md5_ff(c,o,a,f,k,h,m){return md5_cmn(o&a|~o&f,c,o,k,h,m)}function md5_gg(c,o,a,f,k,h,m){return md5_cmn(o&f|a&~f,c,o,k,h,m)}
function md5_hh(c,o,a,f,k,h,m){return md5_cmn(o^a^f,c,o,k,h,m)}function md5_ii(c,o,a,f,k,h,m){return md5_cmn(a^(o|~f),c,o,k,h,m)}function safe_add(c,o){var a=(c&65535)+(o&65535);return(c>>16)+(o>>16)+(a>>16)<<16|a&65535}function bit_rol(c,o){return c<<o|c>>>32-o};if(!BITLY||BITLY===undefined)BITLY={};window.$_xSCr=[window];BITLY.unauth_shorten={inputs:null,signature_key:"NWA$$adf$gh$=="};
(function(){function c(j){j.preventDefault();var q={url:"/data/shorten",type:"POST",dataType:"json",traditional:"true",success:o,error:function(){var u=$._("An error occurred shortening that link");notify(u,{type:"error"});window.App&&App.Dispatch.trigger("shorten:unauth_error")}};window.App&&App.Dispatch.trigger("shorten:unauth_request_made");$.fn.ajaxSubmit?$(b.target_form).ajaxSubmit(q):m.call($(b.target_form),j,q)}function o(j){if(j)if(j.data&&j.status_code==200)window.App&&App.Dispatch.trigger("shorten:unauth",
j.data);else{var q=$._("An error occurred shortening that link");switch(j.status_txt){case "INVALID_URI":case "INVALID_ARG_URL":q=$._("Unable to shorten that link. It is not a valid url.");break;case "ALREADY_A_BITLY_LINK":q=$._("That is already a bitly link")}notify(q,{type:"error"});window.App&&App.Dispatch.trigger("shorten:unauth_error")}}function a(j){if(j&&j.data){$(".last_shorten").show();$(b.el_inner).trigger("shortenComplete",j.data);$(b.target_form).get(0).reset()}}function f(j,q){for(var u=
atob(d.sig_salt),w=["",""],A=j.find("input").filter("[type=hidden],[type=text]"),G=0;G<A.length;G++){var N=$(A[G]),I=N.attr("name");N=N.attr("value");if($.inArray(I,d.lst1)>-1)N="";q[I]=N}for(G=0;G<d.lst1.length;G++)q[d.lst1[G]]=w.pop()||"";q[d.key]=u;q.key=k(u,q);delete q[d.key];return q}function k(j,q){var u;u=h(q);var w,A=[],G=[];for(w=0;w<u.length;w++){A=u[w];G.push(A[0]+"="+A[1])}u=G.join("&");return hex_md5(u+j)}function h(j){var q=[],u;for(u in j)j.hasOwnProperty(u)&&q.push([u,j[u]]);q.sort(function(w,
A){return w[0]>A[0]?1:-1});return q}function m(j,q){var u=$(this);j.preventDefault();var w={};u.find("input[type=text], input[type=password], input[type=checkbox], input[type=hidden], input[type=radio], textarea").each(function(G,N){$input=$(N);var I=$input.attr("name");if(I)if($input.attr("type")==="checkbox"){var R=$input[0].checked;if($input.hasClass("inv"))R=!R;w[I]=$input.hasClass("bool")?R?"true":"false":R?1:0}else if($input.attr("type")==="radio"){if($input[0].checked)w[I]=$input.val()}else w[I]=
$input.val()});var A=$.param(w);q=$.extend({url:$(this).data("ajax_action")||this.action||location.pathname,dataType:"json",data:A,type:u.attr("method").toUpperCase()||"POST"},q);$.ajax(q)}var b={target_form:"#unAuthShortenForm",short_box:"#shortenUnAuthContainer",el_inner:"#sidebar_container_inner"},d={sig_salt:"",key:"",lst1:[],lst2:[],lst3:[]};if(!$._)$._=function(j){return j};BITLY.unauth_shorten.validate_form=function(j,q,u,w){var A,G,N;j=$(j.target);A=["input","name","value","key"];var I,R=
{},S=["",""],X=A[1],Q=A[2];w=atob(w.pop());G=j.find(A[0]);for(N=0;N<G.length;N++){I=$(G[N]);I.attr("name")==="key"&&I.remove()}I=j.find(A[0]).filter("[type=hidden],[type=text]");for(var O=0;O<I.length;O++){A=$(I[O]);G=A.attr(X);N=A.attr(Q);if($.inArray(G,u)>-1){N="";A.attr(Q,"")}R[G]=N}for(O=0;O<u.length;O++)R[u[O]]=S.pop()||"";R[q]=w;q=$.extend(true,{},R);(key=k(w,q))&&j.append('<input type="hidden" '+X+"='key' "+Q+"='"+key+"' />")};BITLY.unauth_shorten.init=function(j,q){b=$.extend(true,{},void 0,
q);$(function(u){b.old_school_submit?u(b.target_form).bind("submit",function(w){if(!u.trim(u(b.short_box).val())){w.preventDefault();location.href="/shorten"}}):u(b.target_form).bind("submit",c);b.history_container&&BITLY.unauth.history.init(b.history_container,{form:b.target_form,short_box:b.short_box})})};BITLY.unauth_shorten.sidebar_start=function(j,q){b=$.extend(true,{},void 0,q);$(function(u){u("#sidebar_metrics").sidebarClicks();u(b.el_inner).linkCapsule(".shortened_results_list",{capsule_container:".shortenedBitlyListListBox",
block_customization:true});j&&u(b.el_inner).trigger("shortenComplete",j);u(b.target_form).bind("submit",function(w){w.preventDefault();var A={url:"/data/shorten",type:"POST",dataType:"json",traditional:"true",success:a,error:function(){}};u(w.target).ajaxSubmit(A)});u(b.el_inner).bind("shortenComplete",function(w){w.stopPropagation()})})};BITLY.unauth_shorten.mobile_start=function(j,q,u,w,A,G){d.sig_salt=A.pop();d.key=w;j[q]=f;m_names=u;d.lst1=u;d.lst2=A;d.lst3=G}})();(function(){var c;c=function(){function o(){var a;this.shortlinks=this._normalizeShortlinks(((a=$.cookie.get(this.COOKIE_NAME))!=null?a.split(","):void 0)||[])}o.prototype.COOKIE_NAME="anon_shortlinks";o.prototype.hostname=location.hostname;o.prototype._normalizeShortlinks=function(a){var f,k,h,m,b;k=[];m=0;for(b=a.length;m<b;m++){h=a[m];if(typeof h==="object"&&h.global_hash&&h.ts)h=""+h.global_hash+":"+h.ts;h=h.replace(/https?\:\/\//,"");f=h.split(":");if(f[0].indexOf("/")<0)h=""+this.hostname+"/"+
f[0]+":"+f[1];k.push(h)}return k};o.prototype._getShortlinks=function(){var a,f,k,h,m;h=this.shortlinks;m=[];f=0;for(k=h.length;f<k;f++){a=h[f];m.push(a.split(":")[0])}return m};o.prototype._encodeShortlink=function(a){return a.short_url.replace(/https?\:\/\//,"")+":"+a.ts};o.prototype.saveLinks=function(a){this.shortlinks=this._normalizeShortlinks(a);return $.cookie.write(this.COOKIE_NAME,this.shortlinks.join(","),365)};o.prototype.getHashes=function(){var a,f,k,h,m;h=this._getShortlinks();m=[];
f=0;for(k=h.length;f<k;f++){a=h[f];m.push(a.split("/").pop())}return m};o.prototype.hashesToShortlinks=function(){var a,f,k,h,m,b;k={};b=this._getShortlinks();h=0;for(m=b.length;h<m;h++){f=b[h];a=f.split("/").pop();k[a]="http://"+f}return k};o.prototype.hashesToTimestamps=function(){var a,f,k,h,m,b;k={};b=this.shortlinks;h=0;for(m=b.length;h<m;h++){a=b[h];f=a.split(":");a=f[0].split("/");a=a.pop();f=+f[1];k[a]=f}return k};o.prototype.prependLink=function(a){var f,k,h,m,b,d;m=this.shortlinks.slice();
k={};m.unshift(this._encodeShortlink(a));a=[];b=0;for(d=m.length;b<d;b++){h=m[b];f=h.split(":")[0];if(!k[f]){k[f]=true;a.push(h)}}return this.saveLinks(a.slice(0,10))};return o}();App.UnauthHistory=new c}).call(this);(function(){function c(b,d){b=b.replace(/https?:\/\//,"");var j=$(newT.span({clss:"copied"},b));d.prepend(j);j.animate({"margin-top":-15,opacity:0},function(){$(this).remove()})}function o(b){var d="saves"in b?b.saves+" save"+(b.saves!=1?"s":""):"";b="clicks"in b?b.clicks+" click"+(b.clicks!=1?"s":""):"";d&&b&&[d,b].join(" - ");return b}var a="oninput"in window?"input":"propertychange",f=FlashDetect.versionAtLeast(9),k=navigator.platform.indexOf("Mac")>-1;k&&$(document.body).addClass("is-mac");var h=
App.$ZC,m=function(){};m.prototype={constructor:m.prototype.constructor,init:function(b,d){BITLY.util.initClass.call(this,b);this.els.most_recent_link=$("#most_recent_link");this.els.shortened_info=$("#shortened_info");this.els.form=$(d.form);this.els.form_container=this.els.form.closest("#form_container");this.els.short_box=$(d.short_box);this.data.hash_data={};this.data.results=[];this.data.pending_hashes=[];this.data.completed_hashes={};this.data.initial_fetch_completed=false;this.data.server_shorten_data=
null;this.obj.zclip={};this.bindEvents().checkUrl().fetch()},bindEvents:function(){var b=this;this.els.short_box.bind(a,function(){b.checkUrl()});this.els.short_box.bind("paste",function(){setTimeout(function(){var d=b.els.short_box.val();BITLY.util.validateUrl(d)&&b.els.form.submit()},15)});this.els.short_box.bind("keydown",function(d){b.checkCopyKeyCombo(d)&&b.state.last_shorten&&b.state.last_shorten===b.getSelectedText().toString()&&b.copyAnimation(b.state.last_shorten,b.els.form_container)});
this.els.form_container.bind("click",function(d){var j=$(d.target);if(j.is("a.close")){d.preventDefault();delete b.state.last_shorten;b.els.short_box.val("");b.checkUrl()}else if(j.is(".info")){d.preventDefault();b.els.short_box.focus().select()}});$("#shortened_url, .short-url").live("click",function(d){d.preventDefault()});return this},setServerShortenData:function(b){this.data.server_shorten_data=b;this.data.initial_fetch_completed&&this.checkForServerShortenData()},checkForServerShortenData:function(){this.data.initial_fetch_completed=
true;if(this.data.server_shorten_data){this.addNewShorten(this.data.server_shorten_data);this.data.server_shorten_data=null}},checkUrl:function(b){var d=this.els.short_box.val(),j=this.state.last_shorten;if(b||this.state.is_shorten_active&&(!d||!j||d!==j)){delete this.state.is_shorten_active;this.els.form_container.removeClass("shorten_active")}else if(!this.state.is_shorten_active&&d===j){this.state.is_shorten_active=true;this.els.form_container.addClass("shorten_active")}return this},fetchWithCookie:function(b){b=
b||{};var d=b.hashes_to_fetch||App.UnauthHistory.getHashes(),j=App.UnauthHistory.hashesToShortlinks();return BITLY.ajax.POST({url:"/data/info",data:{hash:d,_xsrf:$.cookie.get("_xsrf")},success:function(q){q=q&&q.data&&q.data.info;_.each(q,function(u){u.url=u.long_url;u.short_url=j[u.global_hash]});this.saveResults(q,b.insert_method);b.no_display||this.displayResults();b.no_stats||this.loadClicks();this.checkForServerShortenData()},scope:this})},fetch:function(b){if(App.UnauthHistory.shortlinks.length)return this.fetchWithCookie(b);
b=$.extend({page:1,perpage:10,search_terms:""},b);return BITLY.ajax.POST({url:"/data/search",data:b,success:function(d){d=d&&d.data&&d.data.results;if(d.length>0&&b.perpage===10&&App.UnauthHistory.shortlinks.length===0){timestampedHashes=_.map(d,App.UnauthHistory.encodeShortlink);App.UnauthHistory.saveLinks(timestampedHashes)}this.saveResults(d,b.insert_method);b.no_display||this.displayResults();b.no_stats||this.loadClicks();this.checkForServerShortenData()},error:function(){},scope:this})},saveResults:function(b,
d){if(d!="none")d=d==="prepend"?"unshift":"push";for(var j,q,u=0,w=b.length;u<w;u++){q=b[u];j=q.global_hash;if(this.data.hash_data.hasOwnProperty(j)){if(d!="none"){this.data.results=_.filter(this.data.results,function(A){return A!=j});$("#anon_history #"+j).remove();this.data.results[d](j)}$.extend(this.data.hash_data[j].item,q)}else{if(d!="none")this.data.results[d](j);this.data.hash_data[j]={item:q};this.data.pending_hashes.push(j)}}return this},displayResults:function(b,d){if(typeof b!="number")b=
Math.min(this.data.results.length,10);d||this.el.empty();newT.frag();for(var j,q=[],u=0,w=b;u<w;u++){j=this.shortenedLinkMarkup(this.data.hash_data[this.data.results[u]]);this.el.prepend(j);q.push(this.data.results[u])}u=0;for(w=q.length;u<w;u++)this.setupZClip(q[u]);this.checkResultLength();return this},displaySingleResult:function(b){this.els.most_recent_link.html(this.shortenedLinkMarkup(this.data.hash_data[this.data.results[i]]));this.checkResultLength();var d=this;setTimeout(function(){d.setupZClip(b)},
1E3);return this},checkResultLength:function(){if(this.data.results){if(!this.state.one_or_more&&this.data.results.length){this.state.one_or_more=true;$(document.body).addClass("one-or-more-links")}if(!this.state.ten_or_more&&this.data.results.length>=10){this.state.ten_or_more=true;$(document.body).addClass("ten-or-more-links")}}},massageShorten:function(b){var d=b.url.split("/"),j=b.global_hash||d.pop();d=d.pop();return{ts:b.ts,url:b.long_url,global_hash:j,domain:d,short_url:b.url}},addNewShorten:function(b){b.ts=
Math.floor(+new Date/1E3);b=this.massageShorten(b);App.UnauthHistory.prependLink(b);$(document.body).addClass("has-link");this.displayResults().saveResults([b],"prepend").displaySingleResult(b.global_hash).slideFirst().loadClicks();this.setupZClip($("#anon_history li").first().attr("id"));this.state.last_shorten=b.short_url;this.els.short_box.val(b.short_url);var d=this;setTimeout(function(){d.els.short_box.focus().select()},50);this.checkUrl();this.addNewShortenPreview(b);this.pollForLatest(b.short_url);
return this},addNewShortenPreview:function(b){var d;d=this.shortenActionsMarkup(b);$("#form_container #shorten_actions").empty().append(d);this.attachZClip($("#form_container"),$("#copy_shortlink"),b.short_url,b.global_hash,true)},pollForLatest:function(b,d){var j=b.split("/").pop();d=d||1;var q=this;d===1&&$.when(this.loadSaves(b),this.loadShares(b),this.loadClicks(b)).done(function(){q.setLatestShortenStats(j)});setTimeout(function(){if(!(d>3))if(!(q.data.hash_data.hasOwnProperty(j)&&q.data.hash_data[j].item&&
q.data.hash_data[j].item.hasOwnProperty("title"))){var u=q.fetchWithCookie({perpage:1,hashes_to_fetch:j,no_stats:true,insert_method:"none",no_display:true}).deferred;d++;u.always(function(){q.pollForLatest(b,d)})}},3E3);return this},setLatestShortenStats:function(b){var d=this.data.hash_data[b].clicks,j=this.data.hash_data[b].saves,q=this.data.hash_data[b].shares;d||j||q?$("#link_stats").append(newT.frag(d?newT.li(d+" click"+(d===1?"":"s")):"",j?newT.li(j+" save"+(j===1?"":"s")):"",q?newT.li(q+" share"+
(q===1?"":"s")):"",newT.a({href:"/"+b+"+"}))).show():$("#link_stats").hide()},clicksLoaded:function(b){b=b.data.clicks||[];for(var d,j,q=0,u=b.length;q<u;q++){j=b[q].global_hash;this.data.hash_data.hasOwnProperty(j)||(this.data.hash_data[j]={});this.data.hash_data[j].clicks=b[q].global_clicks;d=this.data.hash_data[j];if(d=o(d)){this.data.completed_hashes[j]=1;d=d.split(" ")[0];$("#"+j+" .info_page").html('<i class="default fa fa-bar-chart-o"></i> '+this.commaSeparateNumber(d))}}this.cleanupPending();
return this},commaSeparateNumber:function(b){for(;/(\d+)(\d{3})/.test(b.toString());)b=b.toString().replace(/(\d+)(\d{3})/,"$1,$2");return b},loadClicks:function(b){var d={},j=$.Deferred();if(b){d=b.split("/").pop();if(this.data&&this.data.hash_data&&this.data.hash_data[d]&&this.data.hash_data[d].hasOwnProperty("clicks")){j.resolve({data:"hi"});return j}d={hash:d}}else d={hash:this.data.pending_hashes};if(b||this.data.pending_hashes.length){j.done(m.prototype.clicksLoaded);BITLY.ajax.POST({url:"/data/clicks",
data:d,success:j.resolve,error:j.reject,scope:this})}else j.resolve();return j.promise()},loadSaves:function(b){var d=$.Deferred();d.done(m.prototype.savesLoaded);BITLY.ajax.POST({url:"/data/saves",data:{link:b},success:d.resolve,scope:this});return d.promise()},savesLoaded:function(b){if(b.data.aggregate_link&&b.data.hasOwnProperty("count")){var d=b.data.aggregate_link.split("/").pop();this.data.hash_data.hasOwnProperty(d)||(this.data.hash_data[d]={});this.data.hash_data[d].saves=b.data.count}},
loadShares:function(b){var d=$.Deferred(),j=this;d.done(function(q){j.sharesLoaded(q,b)});BITLY.ajax.POST({url:"/data/shares",data:{link:b},success:d.resolve,scope:this});return d.promise()},sharesLoaded:function(b,d){if(d&&b.data.hasOwnProperty("total_shares")){var j=d.split("/").pop();this.data.hash_data.hasOwnProperty(j)||(this.data.hash_data[j]={});this.data.hash_data[j].shares=b.data.total_shares}},cleanupPending:function(){for(var b=[],d,j=0,q=this.data.pending_hashes.length;j<q;j++){d=this.data.pending_hashes[j];
this.data.completed_hashes[d]||b.push(d)}this.data.pending_hashes=b;return this},slideFirst:function(){if(BITLY.unauth.history.block_slide_down)BITLY.unauth.history.block_slide_down=false;else{this.els.most_recent_link.find("li").first().hide().css({opacity:0}).slideDown(function(){$(this).animate({opacity:1})});return this}},setupZClip:function(b){var d=$("#"+b),j=d.find(".unauth_capsule");d=d.data("short_link");var q=j.find(".copy");return this.attachZClip(j,q,d,b,false)},attachZClip:function(b,
d,j,q,u){if(!f)return this.attachNoFlashCopyButton(b,d,j,q,u);d.unbind("click").bind("click",function(w){w.preventDefault()});d.attr("data-clipboard-text",j);h.clip(d);d.bind("zeroclipboard-complete",function(){d.focus().blur();c(j,b)});this.bindKeyPressAnimation(b.find("#shortened_url, .short-url"),b,j);return this},attachNoFlashCopyButton:function(b,d,j){var q=this,u=b.find("#shorten_url");d.unbind("click").bind("click",function(w){w.preventDefault();q.selectText(u[0])});this.bindKeyPressAnimation(u,
b,j);return this},checkCopyKeyCombo:function(b){return b.which&&b.which===67&&(k?b.metaKey:b.ctrlKey)},bindKeyPressAnimation:function(b,d,j){var q=this;b.unbind("mouseup").bind("mouseup",function(u){u.preventDefault();u.stopPropagation();setTimeout(function(){q.selectText(b[0])},50)});b.unbind("keydown").bind("keydown",function(u){if(q.checkCopyKeyCombo(u)){q.copyAnimation(j,d);var w=$(this);setTimeout(function(){w.blur()},100)}})},getSelectedText:function(){var b="";if(window.getSelection)b=window.getSelection();
else if(document.getSelection)b=target_el.getSelection();else if(document.selection)b=target_el.selection.createRange().text;return b},selectText:function(b){b.focus();var d=window.getSelection&&window.getSelection(),j=document.createRange&&document.createRange()||document.body.createTextRange&&document.body.createTextRange();if(j.moveToElementText&&j.select){j.moveToElementText(b);j.select()}else if(j.selectNodeContents&&d.removeAllRanges&&d.addRange){j.selectNodeContents(b);d.removeAllRanges();
d.addRange(j)}else d.getBaseAndExtent&&d.setBaseAndExtent(b,0,b,1);var q=this;$(window).bind("mousedown.selected",function(){$(window).unbind("mousedown.selected");q.el.removeClass("selected")})},shortenActionsMarkup:function(b){return'<span class="info">Paste another long URL to shorten it</span><a href="#" id="clear_active_shorten" class="close" title="Clear shorten box and preview">X</a><a id="shortened_url" href="'+_.escape(b.url)+'"><span class="protocol">http://</span>'+_.escape(b.url.replace(/https?\:\/\//,
""))+'</a><a id="copy_shortlink" class="button primary hover" href="#" data-clipboard-text="http://bitly.org/Gzmzgw">Copy</a>'},shortenedLinkMarkup:function(b){var d=b.item;(o(b||{})||"Loading info").split(" ");b=d.short_url||"http://"+(d.domain||location.host)+"/"+d.global_hash;var j=d.url||d.long_url,q=d.title?d.title:j.replace(/https?\:\/\/(?:www\.)?/,"");d.title?j.replace(/https?\:\/\/(?:www\.)?/,""):j.replace(/https?\:\/\/(?:www\.)?([^\/]+)\/?.+/,"$1");return'<li id="'+_.escape(d.global_hash)+
'" class="shortened_link" data-global_hash="'+_.escape(d.global_hash)+'" data-short_link="'+b+'"><img class="favicon" src="/favicon/'+_.escape(d.global_hash)+'.png"><div class="unauth_capsule clearfix"><a class="short-url" href="'+_.escape(b)+'"><span class="protocol">http://</span>'+_.escape(b.replace(/https?\:\/\//,""))+'</a><a class="copy button primary">Copy</a></div><div class="unauth-title-url"><a class="article-title smaller" href="'+_.escape(j)+'">'+_.escape(q)+'</a><a class="info_page" href="/'+
_.escape(d.global_hash)+'+"><i class="default fa fa-bar-chart-o"></i> 0</a></div></li>'}};newT.save("shortened_info.unauth",function(){return newT.div({id:"link_info",clss:"is-preparing-preview is-loading is-hiding-content"},newT.div({clss:"wrap"},newT.a({clss:"title",href:"#"}),newT.span({clss:"long-url"}),newT.ul({id:"link_stats"}),newT.div({clss:"prev-container"},newT.div({clss:"link_preview cf"}))))});BITLY.unauth=BITLY.unauth||{};BITLY.unauth.history=new m;App.Dispatch.on("shorten:unauth",function(b){b&&
BITLY.unauth.history.addNewShorten(b)});App.Dispatch.on("shorten:unauth_request_made",function(){});App.Dispatch.on("UI.Bitmark.Preview.Title:show",function(){})})();(function(){if(!window.BITLY)window.BITLY={};if(!BITLY.tracking)BITLY.tracking={};BITLY.tracking.mixPanel={};BITLY.tracking.mixPanel.track=function(c,o){if(!("mixpanel"in window))return false;if(typeof c!="number"){o=c;c=0}c<=(window.mixpanel_level||0)&&mixpanel.push(o)};BITLY.tracking.mixPanel.trackLink=function(c,o,a,f){if(!("mixpanel"in window))return false;if(typeof c!="number"){f=a;a=o;o=c;c=0}if(c<=(window.mixpanel_level||0)){var k=a,h=c,m=f||500;BITLY.Eventer.delegate({evt:"click",el:o,cb:function(b){b.preventDefault();
var d=$(b.target).attr("href");BITLY.tracking.mixPanel.track(h,k);setTimeout(function(){location.href=d},m)}})}}})();(function(){function c(m,b){if(typeof m!="string")throw Error("Invalid name ("+m+") passed to StatsDTimer");this.name=m;this.tracker=b;this.start()}function o(m){if(typeof m==="string"){var b=m;m={};m[b]=1}else if(typeof m==="object"&&m.slice){b={};for(var d=0,j=m.length;d<j;d++)b[m[d]]=1;m=b}return m}function a(m){if(this._can_send){var b=this._queues[m],d={},j=this.API_PREFIX+m;if(!b)throw Error("Invalid Queue Name: "+m+"- BITLY.tracking.statsd");if(b.length){d=this._queues[m];m={};b={};for(var q,
u=0;d.length;){b=d.pop();for(stat in b){q=this.STAT_PREFIX+(this.STAT_PREFIX?this.PREFIX_SEPARATOR:"")+stat;u=m[q]||0;m[q]=u+b[stat]}}d=m;m=$.Deferred();$.ajax({type:"POST",url:j,data:d,timeout:this.TIMEOUT,success:m.resolve,error:m.reject});return m.promise()}}}if(!window.BITLY)window.BITLY={};if(!BITLY.tracking)BITLY.tracking={};if(!(BITLY.tracking.statsd&&BITLY.tracking.statsd.prototype)){var f="";if(window._DEFAULT_STATSD_NAMESPACE){f=window._DEFAULT_STATSD_NAMESPACE;try{window._DEFAULT_STATSD_NAMESPACE=
null;delete window._DEFAULT_STATSD_NAMESPACE}catch(k){console.log("an error occurred deleting the default statsd namespace")}}var h=function(m){m=m||{};this._can_send=!m.disable_sending;this._queues={incr:[],timing:[]};this._history={incr:{},timing:{}};for(var b=["timeout","api_prefix","stat_prefix","prefix_separator"],d=0,j=b.length;d<j;d++){var q=b[d];if(q in m)this[q.toUpperCase()]=m[q]}};h.prototype={constructor:h.prototype.constructor,TIMEOUT:500,API_PREFIX:"/data/statsd/",STAT_PREFIX:"",PREFIX_SEPARATOR:".",
incr:function(m){var b=m=o(m);for(stat in b)if(this._history.hasOwnProperty("incr"))this._history.incr[stat]=true;this._queues.incr.push(m);return a.call(this,"incr")},incrOnce:function(m){m=o(m);var b=false,d={};for(stat in m)if(this._history.hasOwnProperty("incr"))if(!this._history.incr.hasOwnProperty(stat)){d[stat]=m[stat];b=true}if(m=b?d:null)return this.incr(m)},executeIncrOnLinkClick:function(m,b){b.preventDefault();this.enableSending();var d=$(b.currentTarget).attr("href");this.incr(m).always(function(){location.href=
d})},incrOnLinkClick:function(m,b){var d=this.executeIncrOnLinkClick.bind(this,b);if($.fn.live)$(m).live("click.incr",d);else $(document).on("click.incr",m,d)},timing:function(m,b){if(typeof m==="string"&&typeof b==="number"){var d=m;m={};m[d]=b}this._queues.timing.push(m);a.call(this,"timing")},getTimer:function(m){return new c(m,this)},flushQueues:function(){var m=this.isSendingEnabled();this.enableSending();a.call(this,"incr");a.call(this,"timing");m||this.disableSending()},enableSending:function(){this._can_send=
true},disableSending:function(){this._can_send=false},isSendingEnabled:function(){return this._can_send},setStatPrefix:function(m,b){if(b&&f)m=f+this.PREFIX_SEPARATOR+m;this.STAT_PREFIX=m},clone:function(m){return new h(m)}};c.prototype={constructor:c.prototype.constructor,start:function(){this.start_time=+new Date;return this},stop:function(){this.end_time=+new Date;this.diff=0;if(this.start_time&&this.end_time>=this.start_time)this.diff=this.end_time-this.start_time;this.tracker.timing(this.name,
this.diff);return this}};BITLY.tracking.statsd=new h}})();(function(){var c={},o={};BITLY.tracking.statsd.constructor.prototype.incrBasedOnFeatureFlag=function(a,f){if(BITLY.util&&BITLY.util.isFeatureFlagEnabled)if(BITLY.util.isFeatureFlagEnabled(a)){c.hasOwnProperty(a)||(c[a]=this.clone({stat_prefix:a+"."+this.STAT_PREFIX}));return c[a].incr(f)}else{o.hasOwnProperty(a)||(o[a]=this.clone({stat_prefix:"no_"+a+"."+this.STAT_PREFIX}));return o[a].incr(f)}};BITLY.tracking.statsd.constructor.prototype.incrOnceBasedOnFeatureFlag=function(a,f){if(BITLY.util&&BITLY.util.isFeatureFlagEnabled)if(BITLY.util.isFeatureFlagEnabled(a)){c.hasOwnProperty(a)||
(c[a]=this.clone({stat_prefix:a+"."+this.STAT_PREFIX}));return c[a].incrOnce(f)}else{o.hasOwnProperty(a)||(o[a]=this.clone({stat_prefix:"no_"+a+"."+this.STAT_PREFIX}));return o[a].incrOnce(f)}}})();BITLY.LinkPreview=function(c,o,a){this.init(c,o,a)};
BITLY.LinkPreview.prototype={constructor:BITLY.LinkPreview.prototype.constructor,init:function(c,o,a){BITLY.util.initClass.call(this,c);a=a||{};this.data=$.extend({hash:null,global_hash:null},o);this.state={preloaded_content:false,video_loading:false,video_loaded:false,video_play_on_load:false};c=483;if(a.preview_machine&&a.preview_machine.opts){c=a.preview_machine.opts.max_width||c;title_fallback=a.preview_machine.opts.title_fallback||false}this.opts=$.extend({title_fallback:true,max_item_width:c,
use_video_preview:true,auto_play_video:true,do_delay_click:false,use_preloaded_content:true},a);if(!this.opts.use_video_preview){this.state.video_play_on_load=true;this.state.video_loaded=true}if(this.opts.preview_machine){this.parents.preview_machine=this.opts.preview_machine;delete this.opts.preview_machine}if(this.opts.use_preloaded_content){this.state.preloaded_content=this.el.children().not(".no_preview").length?true:false;this.state.preloaded_content&&this.processPreloadedContent();this.state.preloaded_content||
this.load()}else this.load()},load:function(){if(this.parents.preview_machine){result=this.parents.preview_machine.queueItem({url:this.data.longUrl,global_hash:this.data.global_hash});this.state.preloaded_content||(result?this.previewSuccess(result):BITLY.Eventer.delegate({evt:"previews_loaded",ns:this.data.global_hash,cb:function(c,o){if(o.hasOwnProperty(this.data.global_hash)){BITLY.Eventer.undelegate({evt:"previews_loaded",ns:this.data.global_hash});this.previewSuccess(o[this.data.global_hash]);
this.opts.onload&&typeof this.opts.onload==="function"&&this.opts.onload.call(this,o[this.data.global_hash]);this.state.preloaded_content=true}},scope:this}))}else this.checkEmbedly()},processPreloadedContent:function(){if(this.el.hasClass("video")){var c=this;this.el.bind("mouseover.preload_video",function(){c.el.unbind("mouseover.preload_video");c.state.video_loading=true;c.checkEmbedly()});BITLY.Eventer.delegate({evt:"click",el:this.el,cb:function(){this.state.video_play_on_load=true;if(this.state.video_loaded&&
this.data.html){this.data.is_script_loader&&this.loadIFrameContent(true);this.convertPreviewToVideo()}else this.state.video_loading||this.checkEmbedly();return false},scope:this})}return this},cleanup:function(){if(this.el.hasClass("video")){this.state.preloaded_content=false;this.el.empty();this.load()}return this},checkEmbedly:function(){BITLY.ajax.POST({url:"/data/bundle_embedly",data:{url:this.data.longUrl,global_hash:this.data.global_hash},success:BITLY.LinkPreview.prototype.embedlySuccess,scope:this});
return this},previewSuccess:function(c){if(c){var o=c.type&&c.type=="video"&&c.thumbnail_url&&c.html,a=c.html;if(o&&!this.opts.skip_rich_previews)this.createEmbedlyVideo(c);else if(c.type&&c.type=="photo"&&c.url)this.createEmbedlyImage(c);else if(a&&!this.opts.skip_rich_previews)this.createEmbedlyHTML(c);else if(c.type&&c.type=="link"&&c.description||(a||o)&&this.opts.skip_rich_previews)this.createEmbedlyLink(c);else if(c["element.og:description"]||c["element.description"])this.el.html(newT.render("bundle_link_og",
c));else c["maincontent.text"]?this.el.html(newT.p(c["maincontent.text"]+"...")):this.handleError(c);this.opts.title_fallback&&c.title&&this.el.closest(".no_title").removeClass("no_title").find(".item_title a.text, #item_title a").html(c.title);this.checkTitleAndUrl(c)}return this},handleError:function(){this.opts.insert_in_parts&&this.el.find(".thumbnail_img").addClass("no-img")},checkTitleAndUrl:function(c){var o=this.data.longUrl.replace(/https?\:\/\//,""),a=c.title||o;this.opts.title_el&&$(this.opts.title_el).html(document.createTextNode(a));
this.opts.link_el&&c.title&&$(this.opts.link_el).html(document.createTextNode(o));c.original_url=this.data.longUrl;c.global_hash=this.data.global_hash;window.App&&App.Dispatch.trigger("UI.Bitmark.Preview.Title:show",c)},embedlySuccess:function(c){c&&c.data&&c.data!=""&&c.data.hasOwnProperty(this.data.global_hash)&&this.previewSuccess(c.data[this.data.global_hash]);return this},videoAutoPlayMagic:function(){if(this.data.html&&this.opts.auto_play_video){var c=this._sizeElForVideo(this.data.resp,true),
o=this.data.html.is("embed")?this.data.html:this.data.html.find("embed");o.attr("src",BITLY.util.modifyQueryParams({autoplay:1,autostart:1},o.attr("src")));o.attr("autostart","true");o.attr("autoplay","true");o.attr("flashvars",(o.attr("flashvars")||"")+"&autoplay=1&autostart=1&autoplay=true&autostart=true");var a=this.data.html.is("iframe")?this.data.html:this.data.html.find("iframe");a.attr("src",BITLY.util.modifyQueryParams({autoplay:1,autostart:1,height:c.height,width:c.width},a.attr("src")));
c=this.data.html.is("object")?this.data.html:this.data.html.find("object");c.attr("data")&&c.attr("data",BITLY.util.modifyQueryParams({autoplay:[true,1],autostart:[true,1]},c.attr("data")));a=c.find("param[name='autoplay']").attr("value","true");var f=c.find("param[name='autostart']").attr("value","true"),k=c.find("param[name='wmode']").attr("value","transparent");c.find("param[name='movie']").attr("value",o.attr("src"));if(!a.length){a=$(newT.param({value:"true",name:"autoplay"}));c.prepend(a)}if(!f.length){f=
$(newT.param({value:"true",name:"autostart"}));c.prepend(f)}if(!k.length){k=$(newT.param({value:"transparent",name:"wmode"}));c.prepend(k)}}return this},youtubeConversion:function(c){if(c.provider_url&&c.provider_url.toLowerCase().indexOf("youtube")>-1)if(c.html.indexOf("<object")>-1){var o=$(c.html).find('param[name="movie"]').val(),a=o.indexOf("/p/")>-1?"p":"embed";o=o.split("/").pop().split("?").shift();c.html='<iframe title="YouTube video player" class="youtube-player" type="text/html" width="'+
(c.width||425)+'" height="'+(c.height||390)+'" src="http://www.youtube.com/'+a+"/"+o+'?rel=0" frameborder="0" allowFullScreen></iframe>'}return c},createEmbedlyVideo:function(c){c=this.youtubeConversion(c);var o=c.html;this.data.is_script_loader=/^\<script src\=[^\>]+\>\<\/script\>$/.exec(o);this.data.html=$(newT.div()).html(o).children().first();this.data.resp=c;o=this.el;if(this.opts.insert_in_parts){o=this.el.find(".thumbnail_img");this.el.find("p.description").html(c.description)}if(!this.state.preloaded_content&&
this.opts.use_video_preview){if(this.opts.resize_thumbnail)c.thumbnail_url=this.opts.resize_thumbnail.call(this,c.thumbnail_url);this.el.addClass("has_play_button video");var a=c.thumbnail_url&&c.thumbnail_width&&c.thumbnail_width>175?c.thumbnail_url:false;if(a){var f=this._sizeElForVideo(c);a=BITLY.util.modifyQueryParams({height:f.height,width:f.width},a);o.css("backgroundImage","url("+a+")");o.html(newT.frag(newT.a({clss:"play_button rounded",href:"#"},"\u25ba")))}else{o.html(newT.a({clss:"play_button rounded",
href:"#"},"\u25ba"));o.addClass("no_vid")}if(c.height&&c.width)if(this.opts.insert_in_parts){c=this._sizeElForVideo(c,true);o.css({paddingBottom:100*c.height/c.width+"%"});a||o.addClass("no-img")}else o.css(this._sizeElForVideo(c,true));BITLY.Eventer.delegate({evt:"click",el:o,cb:function(){this.data.is_script_loader&&this.loadIFrameContent(true);this.convertPreviewToVideo();return false},scope:this})}else{o.addClass("video");if(this.state.video_loading){this.state.video_loading=false;this.state.video_loaded=
true}if(this.state.video_loaded&&this.state.video_play_on_load){this.data.is_script_loader&&this.loadIFrameContent(true);this.convertPreviewToVideo()}}return this},convertPreviewToVideo:function(){var c=this.el;if(this.opts.insert_in_parts)c=this.el.find(".thumbnail_img");if(this.data.html){if(!this.data.is_script_loader){this.videoAutoPlayMagic();var o=this.data.html;if(this.data.html.attr("altHtml"))o=this.data.resp.html;c.empty().append(o)}delete this.data.html}c.removeClass("has_play_button").removeClass("no_vid");
c.css({"background-image":""});this.data.is_script_loader||c.children().first().css(this._sizeElForVideo(this.data.resp,true));BITLY.Eventer.undelegate({el:c,evt:"click"})},createEmbedlyImage:function(c){var o=this.el;if(this.opts.insert_in_parts){o=this.el.find(".thumbnail_img");this.el.find("p.description").html(c.description)}c=preview_image_url=BITLY.util.modifyQueryParams({height:null,width:this.opts.max_item_width||null},c.url);c=$(document.createElement("img")).attr("src",c);o.addClass("image");
this.data.html=c;o.html(c);return this},createEmbedlyLink:function(c){if(this.parents.preview_machine&&this.parents.preview_machine.opts&&this.parents.preview_machine.opts.left_thumbnail)c.left_thumbnail=true;else if(this.parents.preview_machine&&this.parents.preview_machine.opts&&this.parents.preview_machine.opts.float_preview)c.float_preview=true;if(this.opts.resize_thumbnail)c.thumbnail_url=this.opts.resize_thumbnail.call(this,c.thumbnail_url);if(this.opts.insert_in_parts){c.thumbnail_url&&c.thumbnail_url!=
""?this.el.find(".thumbnail_img").html(newT.img({src:c.thumbnail_url})):this.el.find(".thumbnail_img").addClass("no-img");this.el.find("p.description").html(c.description)}else{this.data.html=$(newT.render("embedly_link",c));this.el.html(this.data.html)}var o=this;setTimeout(function(){o.el.addClass("link");o=null},15);return this},createEmbedlyHTML:function(c){var o=this.el;if(this.opts.insert_in_parts){o=this.el.find(".thumbnail_img");this.el.find("p.description").html(c.description)}this.data.html=
c.html;o.addClass("html");this.data.html.match(/\<(script|link)/gi)?this.loadIFrameContent():o.html(this.data.html);return this},loadIFrameContent:function(c){var o=this.el;if(this.opts.insert_in_parts)o=this.el.find(".thumbnail_img");var a="/data/view_bundle_iframe_html?global_hash="+encodeURIComponent(this.data.global_hash)+"&url="+encodeURIComponent(this.data.longUrl),f={id:"iframe_"+this.data.hash,name:"iframe_"+this.data.hash,frameborder:"no"};if(c){f.height="100%";f.width="100%";f.scrolling=
"no"}else a+="&link_hash="+encodeURIComponent(this.data.hash);f.src=a;c=newT.iframe(f);o.empty().append(c);return this},_sizeElForVideo:function(c,o){c=c||{};var a=c.width||483,f=c.height||400;if(o&&this.opts.max_item_width){var k=this.opts.max_item_width/a;a=this.opts.max_item_width;f*=k}return{height:Math.floor(f),width:Math.floor(a)}}};
newT.save("embedly_link",function(c){return!c.float_preview?newT.frag(c.left_thumbnail&&c.thumbnail_url&&c.thumbnail_url!=""?newT.div({clss:"img left"},newT.span(newT.img({src:c.thumbnail_url}))):"",newT.div({clss:"td"+(!c.thumbnail_url?" no_img":"")},newT.p(c.description)),!c.left_thumbnail&&c.thumbnail_url&&c.thumbnail_url!=""?newT.div({clss:"img"},newT.span(newT.img({src:c.thumbnail_url}))):""):newT.frag(c.thumbnail_url&&c.thumbnail_url!=""?newT.div({clss:"cf"},newT.p(newT.span(newT.img({src:c.thumbnail_url})),
c.description)):newT.div({clss:"td"+(!c.thumbnail_url?" no_img":"")},newT.p(c.description)))});newT.save("bundle_link_og",function(c){return newT.div({clss:"link_preview link clearfix"},c["element.og:image"]?newT.div({clss:"img clearfix"},newT.span(newT.img({src:c["element.og:image"]}))):"",newT.p({clss:"td"},c["element.og:description"]?c["element.og:description"]:c["element.description"]?c["element.description"]:""))});BITLY.LinkPreviewMachine=function(c,o,a){a=a||{};this.init(c,o,a)};
BITLY.LinkPreviewMachine.prototype={constructor:BITLY.LinkPreviewMachine.prototype.constructor,init:function(c,o,a){BITLY.util.initClass.call(this);this.opts=$.extend({retry_count:3},o);this.data=a;this.state.pending=c||[];this.state.requests=[]},queueItem:function(c){if(this.data.hasOwnProperty(c.global_hash))return this.data[c.global_hash];this.state.pending.push(c);return false},loadPending:function(c){if(this.state.pending.length){c=c||this.opts.chunk_size||this.state.pending.length;for(var o=
[],a,f=Math.ceil(this.state.pending.length/c),k={},h=0,m=0;m<f;m++){k={url:[],global_hash:[]};h=Math.min(c,this.state.pending.length);for(var b=0;b<h;b++){a=this.state.pending.shift();k.url.push(a.url);k.global_hash.push(a.global_hash);k.retry_count=0}o.push(k)}id=this.state.requests.push({chunks:o,returned_chunks:0})-1;f=o.length;for(m=0;m<f;m++)this.requestChunk(o[m],id)}else this.success();return this},requestChunk:function(c,o){BITLY.ajax.POST({url:"/data/bundle_embedly",data:$.param(c,true),
success:function(a){this.success(c,o,a)},error:function(a){this.error(c,o,a)},scope:this})},success:function(c,o,a){typeof o!="undefined"&&this.returnChunk(o);a=a||{};for(var f in a.data)this.data[f]=a.data[f];BITLY.Eventer.trigger("previews_loaded",this.data)},error:function(c,o){if(c.retry_count<this.opts.retry_count){c.retry_count++;this.requestChunk(c,o)}else this.returnChunk(o)},returnChunk:function(c){c=this.state.requests[c];if(++c.returned_chunks>=c.chunks.length){c.chunks.length=0;c.returned_chunks=
0}this.checkClearChunks()},checkClearChunks:function(){for(var c=true,o=0,a=this.state.requests.length;o<a;o++)if(this.state.requests[o]!==null)c=false;if(c)this.state.requests.length=0}};(function(c){function o(w){clearTimeout(q);if(h){if(w==="undefined")w=400;h.animate({top:-1*j},w,function(){var A=h.data("obj");A.onClose&&A.onClose.call({el:h,hide:o},A.data);h.remove();d.remove();h=null})}else a()}function a(){var w=m.shift();if(typeof w!=="undefined"){var A={clss:""},G=" blue";if(w.type&&w.type==="error"){A.clss+=" error";G=""}if(w.type&&w.type==="confirm")A.clss+=" confirm";if(w.type&&w.type==="success")A.clss+=" success";if(w.noclose)A.clss+=" noclose";h=$("<p></p>");h.addClass(A.clss);
h.text(w.content);w.noclose||$('<a href="#"> </a>').addClass("close"+G).appendTo(h);h.data("obj",w);h.hover(function(){f()},function(){k()});w.css&&h.css(w.css);d||(d=$('<div id="notification_center"></div>'));d.appendTo(document.body).append(h.css({visibility:"hidden"}));j=d.height();h.css({visibility:"visible",top:-1*j}).animate({top:"0"},function(){w.onLoad&&w.onLoad.call({el:h,hide:o},w.data)});u=false;k()}}function f(w,A){if(typeof w==="function"&&typeof A==="undefined"){A=w;w=false}if(w)u=true;
clearTimeout(q);A&&A.call({el:h})}function k(w,A){if(typeof w==="function"&&typeof A==="undefined"){A=w;w=false}if(!(u&&!w)){u=false;clearTimeout(q);if(h&&h.data("obj").dur>-1)q=setTimeout(function(){o()},h.data("obj").dur);A&&A.call({el:h})}}var h=null,m=[],b={dur:5E3},d=null,j=0,q=null,u=false;$(document.body).bind("click",function(w){if($(w.target).is("#notification_center a.close")){w.preventDefault();o()}});c.notify=function(w,A){var G=$.extend({},b);A=$.extend(G,A||{});A.content=w;m.push(A);
if(A.type&&A.type==="error"&&BITLY.tracking&&BITLY.tracking.mixPanel)BITLY.tracking.mixPanel.track(["track","danger_will_robinson",{mp_note:w,user_agent:navigator.userAgent||"no user agent"}]);h&&!A.force||o()};c.notify.pause=f;c.notify.resume=k;c.notify.hide=o;c.notify.defaults=b})(window);(function(){var c;c=BITLY.tracking.statsd;App.Dispatch.on("UI.Shortlink:copy",function(){return c.incrOnce("url_copy")});App.Dispatch.on("UI.Shortlink:customize",function(){return c.incrOnce("url_customize")});App.Dispatch.on("UI.BitmarkList:sort",function(o){var a;a=["bitmark_list.sorted"];o&&a.push("bitmark_list.sorted_on."+o);return c.incr(a)});App.Dispatch.on("App.Bitmark:saveExisting",function(){return c.incr("bitmark.resave")});App.Dispatch.on("App.Bitmark:create",function(){return c.incr(["bitmark.created",
"link_shorten"])});App.Dispatch.on("shorten:unauth",function(){return c.incr(["link_shorten","link_shorten_unauth"])});App.Dispatch.on("App.Bitmark:socialShare",function(){return c.incr("bitmark.shared_to_social")});App.Dispatch.on("App.Bitmark:emailShare",function(){return c.incr("bitmark.shared_to_email")});App.Dispatch.on("UI.Bundle.Bitmark:add",function(){return c.incrOnce("bitmark.added_to_bundle")});App.Dispatch.on("UI.Bundle.Bitmark:remove",function(){return c.incrOnce("bitmark.removed_from_bundle")});
App.Dispatch.on("App.Bundles:create",function(){return c.incrOnce("bitmark.bundle_created")});App.Dispatch.on("UI.Bitmarks.Search:search",function(){return c.incrOnce("search.search_used")});App.Dispatch.on("UI.Bitmarks.Search:filter",function(){return c.incrOnce("search.filter_used")});App.Dispatch.on("UI.Bitmarks.Search:paginate",function(){return c.incrOnce("search.pagination_used")});App.Dispatch.on("UI.Bitmarks:bulkPrivacy",function(){return c.incrOnce("bulk.privacy")});App.Dispatch.on("UI.Bitmarks:bulkArchive",
function(){return c.incrOnce("bulk.archive")});App.Dispatch.on("UI.Bitmarks.bulkUnarchive",function(){return c.incrOnce("bulk.unarchive")});App.Dispatch.on("UI.Bundles:bulkAdd",function(){return c.incrOnce("bulk.add_to_bundle")});App.Dispatch.on("UI.Bundles.CreateButton:click",function(){return c.incrOnce("bundle_create_button_click")});App.Dispatch.on("UI.Bitmarklet:install",function(){return c.incrOnce("bitmarklet_install")});App.Dispatch.on("UI.Insight.Share:click",function(){return c.incrOnce("insight.share_clicked")});
App.Dispatch.on("UI.InfoPage.Title:click",function(){return c.incrOnce("title_clicked")});App.Dispatch.on("UI.InfoPage.LongURL:click",function(){return c.incrOnce("long_url_clicked")});App.Dispatch.on("UI.InfoPage.ShortLinkTextField:click",function(){return c.incrOnce("short_link_text_field_clicked")});App.Dispatch.on("UI.InfoPage.Tweet:click",function(o){return c.incrOnce("tweet_"+o)});App.Dispatch.on("UI.InfoPage.ReferrerInfo:click",function(o){return c.incrOnce("referrer_info_clicked."+o)});App.Dispatch.on("UI.InfoPage.ViewReferrerSubDomain:click",
function(o){return c.incrOnce("referrer_subdomain_clicked."+o)});App.Dispatch.on("UI.InfoPage.GraphUserToggle:click",function(){return c.incrOnce("graph_user_toggle_clicked")});App.Dispatch.on("UI.InfoPage.GraphGlobalToggle:click",function(){return c.incrOnce("graph_global_toggle_clicked")});App.Dispatch.on("UI.InfoPage.time_selector:change",function(o){if(o.allow_instrumentation)return c.incrOnce("time_selector_option_changed."+o.period)});App.Dispatch.on("UI.InfoPage.map:hover",function(){return c.incrOnce("map_hovered")});
App.Dispatch.on("UI.InfoPage.map:click",function(){return c.incrOnce("map_clicked")});App.Dispatch.on("UI.InfoPage.graph.data:hover",function(){return c.incrOnce("graph_data_bar_hovered")});App.Dispatch.on("App.Overview.ClickSummary:error",function(){return c.incr("click_summary_error")});App.Dispatch.on("App.Overview.ClickSummary:no_data",function(){return c.incr("click_summary_no_data")});App.Dispatch.on("App.Overview.TopLinks:error",function(){return c.incr("top_links_error")});App.Dispatch.on("App.Overview.TopLinks:no_data",
function(){return c.incr("top_links_no_data")});App.Dispatch.on("App.Overview.ClickTrends:error",function(){return c.incr("trends_error")});App.Dispatch.on("App.Overview.ClickTrends:no_data",function(){return c.incr("trends_no_data")})}).call(this);(function(){var c;c=function(){function o(a,f){this.pixelHash=a;this.syncTimes=f;if(this.pixelHash==null)this.pixelHash="1LNuLza";if(this.syncTimes==null)this.syncTimes=2}o.prototype.isSyncNeeded=function(){return $.cookie.get("_cc")!=="1"};o.prototype.triggerSync=function(){var a,f,k,h,m;m=[];for(a=k=h=this.syncTimes;h<=1?k<=1:k>=1;a=h<=1?++k:--k){f=new Image;m.push(f.src="//bitly.com/"+this.pixelHash+"?cache_buster="+a)}return m};o.prototype.sync=function(){if(this.isSyncNeeded())return this.triggerSync()};
return o}();window.CookieSync=c}).call(this);(function(c){function o(){if(c.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log)window.console.log(a);else window.opera&&window.opera.postError&&window.opera.postError(a)}}c.fn.ajaxSubmit=function(a){function f(){function w(){var E=j.attr("target"),K=j.attr("action");N.setAttribute("target",R);N.getAttribute("method")!="POST"&&N.setAttribute("method","POST");N.getAttribute("action")!=I.url&&N.setAttribute("action",I.url);I.skipEncodingOverride||
j.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});I.timeout&&setTimeout(function(){ba=true;A()},I.timeout);var n=[];try{if(I.extraData)for(var x in I.extraData)n.push(c('<input type="hidden" name="'+x+'" value="'+I.extraData[x]+'" />').appendTo(N)[0]);X.appendTo("body");X.data("form-plugin-onload",A);N.submit()}finally{N.setAttribute("action",K);E?N.setAttribute("target",E):j.removeAttr("target");c(n).remove()}}function A(){if(!na){X.removeData("form-plugin-onload");var E=true;
try{if(ba)throw"timeout";r=Q.contentWindow?Q.contentWindow.document:Q.contentDocument?Q.contentDocument:Q.document;var K=I.dataType=="xml"||r.XMLDocument||c.isXMLDoc(r);o("isXml="+K);if(!K&&window.opera&&(r.body==null||r.body.innerHTML==""))if(--C){o("requeing onLoad callback, DOM not available");setTimeout(A,250);return}na=true;O.responseText=r.documentElement?r.documentElement.innerHTML:null;O.responseXML=r.XMLDocument?r.XMLDocument:r;O.getResponseHeader=function(J){return{"content-type":I.dataType}[J]};
var n=/(json|script)/.test(I.dataType);if(n||I.textarea){var x=r.getElementsByTagName("textarea")[0];if(x)O.responseText=x.value;else if(n){var v=r.getElementsByTagName("pre")[0];if(v)O.responseText=v.innerHTML}}else if(I.dataType=="xml"&&!O.responseXML&&O.responseText!=null)O.responseXML=G(O.responseText);s=c.httpData(O,I.dataType)}catch(D){o("error caught:",D);E=false;O.error=D;c.handleError(I,O,"error",D)}if(E){I.success.call(I.context,s,"success",O);aa&&c.event.trigger("ajaxSuccess",[O,I])}aa&&
c.event.trigger("ajaxComplete",[O,I]);aa&&!--c.active&&c.event.trigger("ajaxStop");if(I.complete)I.complete.call(I.context,O,E?"success":"error");setTimeout(function(){X.removeData("form-plugin-onload");X.remove();O.responseXML=null},100)}}function G(E,K){if(window.ActiveXObject){K=new ActiveXObject("Microsoft.XMLDOM");K.async="false";K.loadXML(E)}else K=(new DOMParser).parseFromString(E,"text/xml");return K&&K.documentElement&&K.documentElement.tagName!="parsererror"?K:null}var N=j[0];if(c(":input[name=submit],:input[id=submit]",
N).length)alert('Error: Form elements must not have name or id of "submit".');else{var I=c.extend(true,{},c.ajaxSettings,a);I.context=I.context||I;var R="jqFormIO"+(new Date).getTime(),S="_"+R;window[S]=function(){var E=X.data("form-plugin-onload");if(E){E();window[S]=undefined;try{delete window[S]}catch(K){}}};var X=c('<iframe id="'+R+'" name="'+R+'" src="'+I.iframeSrc+'" onload="window[\'_\'+this.id]()" />'),Q=X[0];X.css({position:"absolute",top:"-1000px",left:"-1000px"});var O={aborted:0,responseText:null,
responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;X.attr("src",I.iframeSrc)}},aa=I.global;aa&&!c.active++&&c.event.trigger("ajaxStart");aa&&c.event.trigger("ajaxSend",[O,I]);if(I.beforeSend&&I.beforeSend.call(I.context,O,I)===false)I.global&&c.active--;else if(!O.aborted){var na=false,ba=0,ea=N.clk;if(ea){var g=ea.name;if(g&&!ea.disabled){I.extraData=I.extraData||{};I.extraData[g]=
ea.value;if(ea.type=="image"){I.extraData[g+".x"]=N.clk_x;I.extraData[g+".y"]=N.clk_y}}}I.forceSync?w():setTimeout(w,10);var s,r,C=50}}}if(!this.length){o("ajaxSubmit: skipping submit process - no element selected");return this}if(typeof a=="function")a={success:a};var k=c.trim(this.attr("action"));if(k)k=(k.match(/^([^#]+)/)||[])[1];k=k||window.location.href||"";a=c.extend(true,{url:k,type:this.attr("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},
a);k={};this.trigger("form-pre-serialize",[this,a,k]);if(k.veto){o("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(a.beforeSerialize&&a.beforeSerialize(this,a)===false){o("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var h,m,b=this.formToArray(a.semantic);if(a.data){a.extraData=a.data;for(h in a.data)if(a.data[h]instanceof Array)for(var d in a.data[h])b.push({name:h,value:a.data[h][d]});else{m=a.data[h];m=c.isFunction(m)?m():m;b.push({name:h,value:m})}}if(a.beforeSubmit&&
a.beforeSubmit(b,this,a)===false){o("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[b,this,a,k]);if(k.veto){o("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}h=c.param(b);if(a.type.toUpperCase()=="GET"){a.url+=(a.url.indexOf("?")>=0?"&":"?")+h;a.data=null}else a.data=h;var j=this,q=[];a.resetForm&&q.push(function(){j.resetForm()});a.clearForm&&q.push(function(){j.clearForm()});if(!a.dataType&&a.target){var u=a.success||
function(){};q.push(function(w){var A=a.replaceTarget?"replaceWith":"html";c(a.target)[A](w).each(u,arguments)})}else a.success&&q.push(a.success);a.success=function(w,A,G){for(var N=a.context||a,I=0,R=q.length;I<R;I++)q[I].apply(N,[w,A,G||j,j])};h=c("input:file",this).length>0;d=j.attr("enctype")=="multipart/form-data"||j.attr("encoding")=="multipart/form-data";if(a.iframe!==false&&(h||a.iframe||d))a.closeKeepAlive?c.get(a.closeKeepAlive,f):f();else c.ajax(a);this.trigger("form-submit-notify",[this,
a]);return this};c.fn.ajaxForm=function(a){if(this.length===0){var f={s:this.selector,c:this.context};if(!c.isReady&&f.s){o("DOM not ready, queuing ajaxForm");c(function(){c(f.s,f.c).ajaxForm(a)});return this}o("terminating; zero elements found by selector"+(c.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(k){if(!k.isDefaultPrevented()){k.preventDefault();c(this).ajaxSubmit(a)}}).bind("click.form-plugin",function(k){var h=k.target,m=c(h);
if(!m.is(":submit,input:image")){h=m.closest(":submit");if(h.length==0)return;h=h[0]}var b=this;b.clk=h;if(h.type=="image")if(k.offsetX!=undefined){b.clk_x=k.offsetX;b.clk_y=k.offsetY}else if(typeof c.fn.offset=="function"){m=m.offset();b.clk_x=k.pageX-m.left;b.clk_y=k.pageY-m.top}else{b.clk_x=k.pageX-h.offsetLeft;b.clk_y=k.pageY-h.offsetTop}setTimeout(function(){b.clk=b.clk_x=b.clk_y=null},100)})};c.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};c.fn.formToArray=
function(a){var f=[];if(this.length===0)return f;var k=this[0],h=a?k.getElementsByTagName("*"):k.elements;if(!h)return f;var m,b,d,j;m=0;for(max=h.length;m<max;m++){b=h[m];if(d=b.name)if(a&&k.clk&&b.type=="image"){if(!b.disabled&&k.clk==b){f.push({name:d,value:c(b).val()});f.push({name:d+".x",value:k.clk_x},{name:d+".y",value:k.clk_y})}}else if((j=c.fieldValue(b,true))&&j.constructor==Array){b=0;for(jmax=j.length;b<jmax;b++)f.push({name:d,value:j[b]})}else j!==null&&typeof j!="undefined"&&f.push({name:d,
value:j})}if(!a&&k.clk){a=c(k.clk);h=a[0];if((d=h.name)&&!h.disabled&&h.type=="image"){f.push({name:d,value:a.val()});f.push({name:d+".x",value:k.clk_x},{name:d+".y",value:k.clk_y})}}return f};c.fn.formSerialize=function(a){return c.param(this.formToArray(a))};c.fn.fieldSerialize=function(a){var f=[];this.each(function(){var k=this.name;if(k){var h=c.fieldValue(this,a);if(h&&h.constructor==Array)for(var m=0,b=h.length;m<b;m++)f.push({name:k,value:h[m]});else h!==null&&typeof h!="undefined"&&f.push({name:this.name,
value:h})}});return c.param(f)};c.fn.fieldValue=function(a){for(var f=[],k=0,h=this.length;k<h;k++){var m=c.fieldValue(this[k],a);m===null||typeof m=="undefined"||m.constructor==Array&&!m.length||(m.constructor==Array?c.merge(f,m):f.push(m))}return f};c.fieldValue=function(a,f){var k=a.name,h=a.type,m=a.tagName.toLowerCase();if(f===undefined)f=true;if(f&&(!k||a.disabled||h=="reset"||h=="button"||(h=="checkbox"||h=="radio")&&!a.checked||(h=="submit"||h=="image")&&a.form&&a.form.clk!=a||m=="select"&&
a.selectedIndex==-1))return null;if(m=="select"){var b=a.selectedIndex;if(b<0)return null;k=[];m=a.options;var d=(h=h=="select-one")?b+1:m.length;for(b=h?b:0;b<d;b++){var j=m[b];if(j.selected){var q=j.value;q||(q=j.attributes&&j.attributes.value&&!j.attributes.value.specified?j.text:j.value);if(h)return q;k.push(q)}}return k}return c(a).val()};c.fn.clearForm=function(){return this.each(function(){c("input,select,textarea",this).clearFields()})};c.fn.clearFields=c.fn.clearInputs=function(){return this.each(function(){var a=
this.type,f=this.tagName.toLowerCase();if(a=="text"||a=="password"||f=="textarea")this.value="";else if(a=="checkbox"||a=="radio")this.checked=false;else if(f=="select")this.selectedIndex=-1})};c.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)this.reset()})};c.fn.enable=function(a){if(a===undefined)a=true;return this.each(function(){this.disabled=!a})};c.fn.selected=function(a){if(a===undefined)a=true;return this.each(function(){var f=
this.type;if(f=="checkbox"||f=="radio")this.checked=a;else if(this.tagName.toLowerCase()=="option"){f=c(this).parent("select");a&&f[0]&&f[0].type=="select-one"&&f.find("option").selected(false);this.selected=a}})}})(jQuery);
